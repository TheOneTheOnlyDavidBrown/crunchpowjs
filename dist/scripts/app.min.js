"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function loadComponent(e,t){return new window[e](t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),BaseModel=function(){function e(t,n){_classCallCheck(this,e),this.modelName=t,this.data=n}return _createClass(e,[{key:"set",value:function(e,t){var n=this._existsInSchema(this.data,e,t);if(!n)return void console.warn('Not setting "'+e+'" in '+this.modelName+' model to "'+t+'". Doesnt exist in the schema');var r=this._checkType(this.data,e,t);return r?void this._setValue(this.data,e,t):void console.warn('Not setting "'+e+'" in '+this.modelName+' model to "'+t+'". It isnt the right type')}},{key:"get",value:function(e){return e?this._getValue(this.data,e):this._getData(this.data)}},{key:"_existsInSchema",value:function(e,t,n){return t="string"==typeof t?t.split("."):t,t.length>1&&e[t[0]]?this._existsInSchema(e[t.shift()].value,t,n):e[t[0]]?!0:!1}},{key:"_checkType",value:function(e,t,n){return t="string"==typeof t?t.split("."):t,t.length>1&&e[t[0]]?this._checkType(e[t.shift()].value,t,n):e[t[0]].type===typeof n}},{key:"_getData",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];for(var n in e)"object"===e[n].type?(t[n]={},this._getData(e[n].value,t[n])):t[n]=e[n].value;return t}},{key:"_setValue",value:function(e,t,n){t="string"==typeof t?t.split("."):t,t.length>1&&e[t[0]].value?this._setValue(e[t.shift()].value,t,n):e[t[0]].value&&(e[t[0]].value=n)}},{key:"_getValue",value:function(e,t){return t="string"==typeof t?t.split("."):t,t.length>1&&e[t[0]]?this._getValue(e[t.shift()].value,t):e[t[0]].value||""}},{key:"_checkStatus",value:function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}},{key:"_parseJSON",value:function(e){return e.json()}},{key:"save",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.get("id"):arguments[0],t=this.endpointPrefix+"/"+this.modelName+"/"+e,n={};return n[this.modelName]=this.get(),console.log("make post xhr call to "+t,n),fetch(t,{method:"post",body:JSON.stringify(n)}).then(this._checkStatus).then(this._parseJSON)}},{key:"fetch",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=arguments.length<=0||void 0===arguments[0]?this.get("id"):arguments[0],t=this.endpointPrefix+"/"+this.modelName+"/"+e;return console.log("make get xhr call to "+t),fetch(t,{method:"get"}).then(this._checkStatus).then(this._parseJSON)})},{key:"update",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.get("id"):arguments[0],t=this.endpointPrefix+"/"+this.modelName+"/"+e,n={};n[this.modelName]=this.get(),console.log("make update xhr call to "+t,n)}},{key:"destroy",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.get("id"):arguments[0],t=this.endpointPrefix+"/"+this.modelName+"/"+e;return console.log("make delete xhr call to "+t),fetch(t,{method:"delete"}).then(this._checkStatus).then(this._parseJSON)}},{key:"endpointPrefix",set:function(e){this._endpointPrefix=e},get:function(){return this._endpointPrefix||"api/vi"}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();NodeList.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator];var Binding=function(){function e(t){var n=this;_classCallCheck(this,e),this.data=t,this._findBindable(),this.utils=new Utils;var r=r||{};setInterval(function(){n.utils.compare(r,n.data)===!1&&(r=JSON.parse(JSON.stringify(n.data)),n._populateBindings())},10)}return _createClass(e,[{key:"_populateBindings",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=document.querySelectorAll("[liaison-bind]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var i=r.value,o=document.activeElement.getAttribute("liaison-bind");i===document.activeElement||i.getAttribute("liaison-bind")!==o&&null!==o||this._setElementContent(i,this._getValue(this.data,i.getAttribute("liaison-bind")))}}catch(s){t=!0,n=s}finally{try{!e&&a["return"]&&a["return"]()}finally{if(t)throw n}}}},{key:"_findBindable",value:function(){var e=this,t=!0,n=!1,r=void 0;try{for(var a,i=function(){var t=a.value;t.addEventListener("keydown",function(n){setTimeout(function(){return e._setValue(e.data,t.getAttribute("liaison-bind"),n.srcElement.value)})})},o=document.querySelectorAll("[liaison-bind]")[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)i()}catch(s){n=!0,r=s}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw r}}}},{key:"_setElementContent",value:function(e,t){void 0!==t&&(e.innerHTML=t,e.value=t)}},{key:"_setValue",value:function(e,t,n){"string"==typeof t&&(t=t.split(".")),t.length>1&&e[t[0]]?this._setValue(e[t.shift()],t,n):"string"==typeof e[t[0]]&&(e[t[0]]=n)}},{key:"_getValue",value:function(e,t){return"string"==typeof t&&(t=t.split(".")),t.length>1&&e[t[0]]?this._getValue(e[t.shift()],t):e[t[0]]}},{key:"refresh",value:function(e){this.data=e,this._populateBindings()}}]),e}(),Liaison=function e(t){_classCallCheck(this,e);for(var n in t)n&&(this[n]=t[n])},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Router=function(){function e(){var t=this;_classCallCheck(this,e),this.utils=new Utils,this.view=document.querySelector("[liaison-view]"),this.paths=[],this.wildcards=[],setTimeout(function(){return t.go(window.location.hash.substring(1))},0),window.addEventListener("popstate",function(e){return t.go(e.state||window.location.hash.substring(1),!1)})}return _createClass(e,[{key:"state",value:function(e){return e.name.indexOf(":")>0?this.wildcards.push(e):this.paths.push(e),this}},{key:"fallback",value:function(e){this.paths.push(e),this._fallback=e}},{key:"go",value:function(e){var t=this;console.log("going to state "+e);var n=this._findRouteInPaths(e);return n?void fetch(n.templateUrl).then(function(e){return e.text()}).then(function(e){t.view.innerHTML=e}):(this.go(this._fallback.name),!1)}},{key:"_findRouteInPaths",value:function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=this.paths[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;if(o.name===e)return o}}catch(s){n=!0,r=s}finally{try{!t&&i["return"]&&i["return"]()}finally{if(n)throw r}}e=e.substring(1).split("/");var l=!0,u=!1,c=void 0;try{for(var h,f=this.wildcards[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var d=h.value,p=d.name.substring(1).split("/");if(p.length===e.length)for(var v=0,g=p.length;g>v;v++)if(0===p[v].indexOf(":")){var y=p;if(y[v]=e[v],this.utils.compare(y,e))return d}}}catch(s){u=!0,c=s}finally{try{!l&&f["return"]&&f["return"]()}finally{if(u)throw c}}return!1}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Utils=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"_hasher",value:function(e){var t=0,n=void 0,r=void 0,a=e.toString();for(n=0,r=a.length;r>n;n++)t=(t<<5)-t+a.charCodeAt(n)&4294967295;return t}},{key:"_object",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];for(var r in t){if("object"==typeof t[r])return this._object(e,t[r],n);hasOwnProperty.call(t,r)&&(n+=e._hasher(r+e._hasher(t[r])))}return n}},{key:"hash",value:function(e){var t={string:this._hasher,number:this._hasher,"boolean":this._hasher,object:this.object},n=typeof e;return null!==e&&t[n]?t[n](this,e)+this._hasher(n):0}},{key:"compareHashes",value:function(e,t){return this.hash(e)===this.hash(t)}},{key:"compare",value:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Example=function(){function e(t){_classCallCheck(this,e),this.bind=new Liaison(t),console.log(this.bind),this.binding=new Binding(this.bind),this.exampleBinding(),this.exampleRouter()}return _createClass(e,[{key:"exampleBinding",value:function(){var e=new UserModel;e.set("age","8777"),e.set("name","my first name on user model"),e.set("age",{age:33}),e.set("age",999),e.set("address","my address"),e.set("address",e.upCase("my second address")),e.save().then(function(){console.log("then")})["catch"](function(e){console.log("request failed",e)}),e.update(),e.fetch().then(function(){console.log("then")})["catch"](function(e){console.log("request failed",e)}),e.destroy().then(function(){console.log("then")})["catch"](function(e){console.log("request failed",e)});var t=new ViewModel;t.set("single","updated via viewmodel model set function"),t.set("user.name","my second example name"),t.set("user.age",{age:22}),t.set("user.age",444),t.set("user.address",77878),t.set("user.address","my second address"),this.binding.refresh(this.bind)}},{key:"exampleRouter",value:function(){}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Example2=function(){function e(t){_classCallCheck(this,e),this.bind=new Liaison(t),this.binding=new Binding(this.bind)}return _createClass(e,[{key:"anotherFunction",value:function(){console.log(this.bind.string)}}]),e}();window.router=window.router||new Router,window.router.state({name:"/users",templateUrl:"templates/userindex.html"}).state({name:"/user/:id",templateUrl:"templates/user.html"}).state({name:"/user/:id/details",templateUrl:"templates/userdetails.html"}).state({name:"/user/:id/:subid",templateUrl:"templates/usersub.html"}).state({name:"/list",templateUrl:"templates/list.html"}).state({name:"/",templateUrl:"templates/list.html"}).fallback({name:"/404",templateUrl:"templates/404.html"});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var a=e,i=t,o=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(o)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=i,n=o,r=!0}},UserModel=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"user",{id:{value:789787,type:"number"},name:{value:"name",type:"string"},address:{value:"221b bake",type:"string"},age:{value:null,type:"number"}})}return _inherits(t,e),_createClass(t,[{key:"upCase",value:function(e){return e.toUpperCase()}}]),t}(BaseModel),_get=function(e,t,n){for(var r=!0;r;){var a=e,i=t,o=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(o)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=i,n=o,r=!0}},ViewModel=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"view",{single:{type:"string",value:"from schema"},user:{type:"object",value:{id:{type:"number",value:88888},name:{type:"string",value:"Sherlock Holmes"},address:{type:"string",value:"221b Baker Street"}}},programmingLanguages:{type:"array",value:["javascript","ruby"]}})}return _inherits(t,e),t}(BaseModel);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5taW4uanMiLCJMaWFpc29uLmpzIiwiQmFzZU1vZGVsLmpzIiwiQmluZGluZy5qcyIsIlJvdXRlci5qcyIsIlV0aWxzLmpzIiwic2NyaXB0cy9FeGFtcGxlLmpzIiwic2NyaXB0cy9FeGFtcGxlMi5qcyIsInNjcmlwdHMvUm91dGVzLmpzIiwic2NyaXB0cy9Vc2VyTW9kZWwuanMiLCJzY3JpcHRzL1ZpZXdNb2RlbC5qcyJdLCJuYW1lcyI6WyJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwibG9hZENvbXBvbmVudCIsIm1vZHVsZSIsImRhdGEiLCJ3aW5kb3ciLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJwcm90b3R5cGUiLCJPYmplY3QiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsInZhbHVlIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiQmFzZU1vZGVsIiwibW9kZWxOYW1lIiwic2NoZW1hIiwidGhpcyIsImV4aXN0c0luU2NoZW1hIiwiX2V4aXN0c0luU2NoZW1hIiwiY29uc29sZSIsIndhcm4iLCJ0eXBlTWF0Y2hlcyIsIl9jaGVja1R5cGUiLCJfc2V0VmFsdWUiLCJhY2Nlc3MiLCJfZ2V0VmFsdWUiLCJfZ2V0RGF0YSIsIm9iaiIsInNwbGl0Iiwic2hpZnQiLCJ0eXBlIiwibmV3T2JqIiwiYXJndW1lbnRzIiwidW5kZWZpbmVkIiwiZWxlbWVudCIsInJlc3BvbnNlIiwic3RhdHVzIiwiZXJyb3IiLCJFcnJvciIsInN0YXR1c1RleHQiLCJqc29uIiwiaWQiLCJnZXQiLCJ1cmwiLCJlbmRwb2ludFByZWZpeCIsInNlbmRPYmoiLCJsb2ciLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidGhlbiIsIl9jaGVja1N0YXR1cyIsIl9wYXJzZUpTT04iLCJfZmV0Y2giLCJhcHBseSIsInRvU3RyaW5nIiwic2V0IiwicHJlZml4IiwiX2VuZHBvaW50UHJlZml4IiwiTm9kZUxpc3QiLCJTeW1ib2wiLCJpdGVyYXRvciIsIkFycmF5IiwiQmluZGluZyIsIl90aGlzIiwiX2ZpbmRCaW5kYWJsZSIsInV0aWxzIiwiVXRpbHMiLCJjdXJyZW50RGF0YSIsInNldEludGVydmFsIiwiY29tcGFyZSIsInBhcnNlIiwiX3BvcHVsYXRlQmluZGluZ3MiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uIiwiX2RpZEl0ZXJhdG9yRXJyb3IiLCJfaXRlcmF0b3JFcnJvciIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmV4dCIsImRvbmUiLCJlbG0iLCJiaW5kTmFtZSIsImFjdGl2ZUVsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJfc2V0RWxlbWVudENvbnRlbnQiLCJlcnIiLCJfdGhpczIiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiIsIl9kaWRJdGVyYXRvckVycm9yMiIsIl9pdGVyYXRvckVycm9yMiIsIl9zdGVwMiIsIl9sb29wIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwic2V0VGltZW91dCIsInNyY0VsZW1lbnQiLCJfaXRlcmF0b3IyIiwiaW5uZXJIVE1MIiwiTGlhaXNvbiIsImRhdHVtIiwiUm91dGVyIiwidmlldyIsInF1ZXJ5U2VsZWN0b3IiLCJwYXRocyIsIndpbGRjYXJkcyIsImdvIiwibG9jYXRpb24iLCJoYXNoIiwic3Vic3RyaW5nIiwic3RhdGUiLCJuYW1lIiwiaW5kZXhPZiIsInB1c2giLCJfZmFsbGJhY2siLCJyb3V0ZSIsIl9maW5kUm91dGVJblBhdGhzIiwidGVtcGxhdGVVcmwiLCJ0ZXh0IiwidGVtcGxhdGUiLCJwYXRoIiwid2lsZGNhcmQiLCJfd2lsZGNhcmQiLCJpbmRleCIsImxlbiIsInRlbXAiLCJ2YWwiLCJzdHJpbmciLCJjaGFyQ29kZUF0Iiwic2VsZiIsInJlc3VsdCIsInByb3BlcnR5IiwiX29iamVjdCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIl9oYXNoZXIiLCJpbnB1dCIsInR5cGVzIiwibnVtYmVyIiwiYm9vbGVhbiIsIm9iamVjdCIsIml0ZW1BIiwiaXRlbUIiLCJFeGFtcGxlIiwiYmluZCIsImJpbmRpbmciLCJleGFtcGxlQmluZGluZyIsImV4YW1wbGVSb3V0ZXIiLCJ1c2VyIiwiVXNlck1vZGVsIiwiYWdlIiwidXBDYXNlIiwic2F2ZSIsInVwZGF0ZSIsImRlc3Ryb3kiLCJ2aWV3bW9kZWwiLCJWaWV3TW9kZWwiLCJyZWZyZXNoIiwiRXhhbXBsZTIiLCJyb3V0ZXIiLCJmYWxsYmFjayIsIl9nZXQiLCJfeCIsIl94MiIsIl94MyIsIl9hZ2FpbiIsInJlY2VpdmVyIiwiZGVzYyIsInBhcmVudCIsImdldHRlciIsIkZ1bmN0aW9uIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZ2V0UHJvdG90eXBlT2YiLCJfQmFzZU1vZGVsIiwiYWRkcmVzcyIsInN0ciIsInRvVXBwZXJDYXNlIiwic2luZ2xlIiwicHJvZ3JhbW1pbmdMYW5ndWFnZXMiXSwibWFwcGluZ3MiOiJBQUNBLFlBSUEsU0FBU0EsaUJBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBZ01oSCxRQUFTSCxpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0E4SWhILFFBQVNILGlCQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQzFVakcsUUFBU0MsZUFBY0MsRUFBUUMsR0FDNUMsTUFBTyxJQUFJQyxRQUFPRixHQUFRQyxHRDRWNUIsUUFBU04s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S0csRUFBV0YsQ0FBS0csR0FBT0MsRUFBU0MsRUFBUzNJLE9BQVd1SSxHQUFTLEVBQXNCLE9BQVh6QixJQUFpQkEsRUFBUzhCLFNBQVNyTCxVQUFXLElBQUlrTCxHQUFPakwsT0FBT3FMLHlCQUF5Qi9CLEVBQVFULEVBQVcsSUFBYXJHLFNBQVR5SSxFQUFKLENBQWlOLEdBQUksU0FBV0EsR0FBUSxNQUFPQSxHQUFLOUssS0FBZ0IsSUFBSWdMLEdBQVNGLEVBQUtoSSxHQUFLLE9BQWVULFVBQVgySSxFQUErQjNJLE9BQW9CMkksRUFBT25DLEtBQUtnQyxHQUFwVSxHQUFJRSxHQUFTbEwsT0FBT3NMLGVBQWVoQyxFQUFTLElBQWUsT0FBWDRCLEVBQW1CLE1BQU8xSSxPQUFvQm9JLEdBQUtNLEVBQVFMLEVBQU1oQyxFQUFVaUMsRUFBTUUsRUFBVUQsR0FBUyxJVWh2QjdjVCxVQUFTLFNBQUFpQixHQUNULFFBREFqQixLVjB2QlRsTCxnQkFBZ0JtQyxLVTF2QlArSSxHQUVUSyxLQUFBM0ssT0FBQXNMLGVBRlNoQixFQUFTdkssV0FBQSxjQUFBd0IsTUFBQXlILEtBQUF6SCxLQUVaLFFBQ0pvSyxRQUNFdEosS0FBTSxTQUNObEMsTUFBTyxlQUVUMkosTUFDRXpILEtBQU0sU0FDTmxDLE9BQ0U2QyxJQUNFWCxLQUFNLFNBQ05sQyxNQUFPLE9BRVRzSCxNQUNFcEYsS0FBTSxTQUNObEMsTUFBTyxtQkFFVHFMLFNBQ0VuSixLQUFNLFNBQ05sQyxNQUFPLHVCQUlieUwsc0JBQ0V2SixLQUFNLFFBQ05sQyxPQUFRLGFBQWMsV1YrdkI1QixNQWxDQVAsV1V2dkJXMEssRUFBU2lCLEdBQVRqQixHQUFrQmxKIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6W251bGwsImV4cG9ydCBkZWZhdWx0IGNsYXNzIExpYWlzb24ge1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgZm9yIChjb25zdCBkYXR1bSBpbiBkYXRhKSB7XG4gICAgICBpZiAoZGF0dW0pIHtcbiAgICAgICAgdGhpc1tkYXR1bV0gPSBkYXRhW2RhdHVtXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGxvYWRDb21wb25lbnQobW9kdWxlLCBkYXRhKSB7XG4gIHJldHVybiBuZXcgd2luZG93W21vZHVsZV0oZGF0YSk7XG59XG4iLCIvLyBUT0RPOiBhbGxvdyBhIHNoYXJlZCBmcm9udGVuZC9iYWNrZW5kIHNjaGVtYSBmaWxlXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNlTW9kZWwge1xuICBjb25zdHJ1Y3Rvcihtb2RlbE5hbWUsIHNjaGVtYSkge1xuICAgIHRoaXMubW9kZWxOYW1lID0gbW9kZWxOYW1lO1xuICAgIHRoaXMuZGF0YSA9IHNjaGVtYTtcbiAgfVxuXG4gIHNldChrZXksIHZhbHVlKSB7XG4gICAgY29uc3QgZXhpc3RzSW5TY2hlbWEgPSB0aGlzLl9leGlzdHNJblNjaGVtYSh0aGlzLmRhdGEsIGtleSwgdmFsdWUpO1xuICAgIGlmICghZXhpc3RzSW5TY2hlbWEpIHtcbiAgICAgIGNvbnNvbGUud2FybihgTm90IHNldHRpbmcgXCIke2tleX1cIiBpbiAke3RoaXMubW9kZWxOYW1lfSBtb2RlbCB0byBcIiR7dmFsdWV9XCIuIERvZXNudCBleGlzdCBpbiB0aGUgc2NoZW1hYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHR5cGVNYXRjaGVzID0gdGhpcy5fY2hlY2tUeXBlKHRoaXMuZGF0YSwga2V5LCB2YWx1ZSk7XG4gICAgaWYgKCF0eXBlTWF0Y2hlcykge1xuICAgICAgY29uc29sZS53YXJuKGBOb3Qgc2V0dGluZyBcIiR7a2V5fVwiIGluICR7dGhpcy5tb2RlbE5hbWV9IG1vZGVsIHRvIFwiJHt2YWx1ZX1cIi4gSXQgaXNudCB0aGUgcmlnaHQgdHlwZWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9zZXRWYWx1ZSh0aGlzLmRhdGEsIGtleSwgdmFsdWUpO1xuICB9XG5cbiAgZ2V0KGFjY2Vzcykge1xuICAgIGlmIChhY2Nlc3MpIHtcbiAgICAgIHJldHVybiB0aGlzLl9nZXRWYWx1ZSh0aGlzLmRhdGEsIGFjY2Vzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLl9nZXREYXRhKHRoaXMuZGF0YSk7XG4gICAgfVxuICB9XG5cbiAgX2V4aXN0c0luU2NoZW1hKG9iaiwgYWNjZXNzLCB2YWx1ZSkge1xuICAgIGFjY2VzcyA9ICh0eXBlb2YoYWNjZXNzKSA9PT0gJ3N0cmluZycpID8gYWNjZXNzLnNwbGl0KCcuJykgOiBhY2Nlc3M7XG4gICAgaWYgKGFjY2Vzcy5sZW5ndGggPiAxICYmIG9ialthY2Nlc3NbMF1dKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZXhpc3RzSW5TY2hlbWEob2JqW2FjY2Vzcy5zaGlmdCgpXS52YWx1ZSwgYWNjZXNzLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvYmpbYWNjZXNzWzBdXSA/IHRydWUgOiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBfY2hlY2tUeXBlKG9iaiwgYWNjZXNzLCB2YWx1ZSkge1xuICAgIGFjY2VzcyA9ICh0eXBlb2YoYWNjZXNzKSA9PT0gJ3N0cmluZycpID8gYWNjZXNzLnNwbGl0KCcuJykgOiBhY2Nlc3M7XG4gICAgaWYgKGFjY2Vzcy5sZW5ndGggPiAxICYmIG9ialthY2Nlc3NbMF1dKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tUeXBlKG9ialthY2Nlc3Muc2hpZnQoKV0udmFsdWUsIGFjY2VzcywgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb2JqW2FjY2Vzc1swXV0udHlwZSA9PT0gdHlwZW9mIHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIF9nZXREYXRhKG9iaiwgbmV3T2JqID0ge30pIHtcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgaW4gb2JqKSB7XG4gICAgICBpZiAob2JqW2VsZW1lbnRdLnR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIG5ld09ialtlbGVtZW50XSA9IHt9O1xuICAgICAgICB0aGlzLl9nZXREYXRhKG9ialtlbGVtZW50XS52YWx1ZSwgbmV3T2JqW2VsZW1lbnRdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld09ialtlbGVtZW50XSA9IG9ialtlbGVtZW50XS52YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ld09iajtcbiAgfVxuXG4gIF9zZXRWYWx1ZShvYmosIGFjY2VzcywgdmFsdWUpIHtcbiAgICBhY2Nlc3MgPSAodHlwZW9mKGFjY2VzcykgPT09ICdzdHJpbmcnKSA/IGFjY2Vzcy5zcGxpdCgnLicpIDogYWNjZXNzO1xuICAgIGlmIChhY2Nlc3MubGVuZ3RoID4gMSAmJiBvYmpbYWNjZXNzWzBdXS52YWx1ZSkge1xuICAgICAgdGhpcy5fc2V0VmFsdWUob2JqW2FjY2Vzcy5zaGlmdCgpXS52YWx1ZSwgYWNjZXNzLCB2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChvYmpbYWNjZXNzWzBdXS52YWx1ZSkge1xuICAgICAgb2JqW2FjY2Vzc1swXV0udmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICBfZ2V0VmFsdWUob2JqLCBhY2Nlc3MpIHtcbiAgICBhY2Nlc3MgPSAodHlwZW9mKGFjY2VzcykgPT09ICdzdHJpbmcnKSA/IGFjY2Vzcy5zcGxpdCgnLicpIDogYWNjZXNzO1xuICAgIGlmIChhY2Nlc3MubGVuZ3RoID4gMSAmJiBvYmpbYWNjZXNzWzBdXSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2dldFZhbHVlKG9ialthY2Nlc3Muc2hpZnQoKV0udmFsdWUsIGFjY2Vzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvYmpbYWNjZXNzWzBdXS52YWx1ZSB8fCAnJztcbiAgICB9XG4gIH1cblxuICBzZXQgZW5kcG9pbnRQcmVmaXgocHJlZml4KSB7XG4gICAgdGhpcy5fZW5kcG9pbnRQcmVmaXggPSBwcmVmaXg7XG4gIH1cblxuICBnZXQgZW5kcG9pbnRQcmVmaXgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VuZHBvaW50UHJlZml4IHx8ICdhcGkvdmknO1xuICB9XG5cbiAgLy8gVE9ETzogcmVmYWN0b3IgdGhpcyB0byBoZWxwZXJcbiAgX2NoZWNrU3RhdHVzKHJlc3BvbnNlKSB7XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSAyMDAgJiYgcmVzcG9uc2Uuc3RhdHVzIDwgMzAwKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQpO1xuICAgICAgZXJyb3IucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIF9wYXJzZUpTT04ocmVzcG9uc2UpIHtcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICB9XG5cbiAgLy8gVE9ETzogQ1JVRCBvcGVyYXRpb25zIHhociBjYWxscy4gcmV0dXJuIHByb21pc2VzXG4gIHNhdmUoaWQgPSB0aGlzLmdldCgnaWQnKSkge1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMuZW5kcG9pbnRQcmVmaXh9LyR7dGhpcy5tb2RlbE5hbWV9LyR7aWR9YDtcbiAgICBjb25zdCBzZW5kT2JqID0ge307XG4gICAgc2VuZE9ialt0aGlzLm1vZGVsTmFtZV0gPSB0aGlzLmdldCgpO1xuICAgIGNvbnNvbGUubG9nKGBtYWtlIHBvc3QgeGhyIGNhbGwgdG8gJHt1cmx9YCwgc2VuZE9iaik7XG5cbiAgICByZXR1cm4gZmV0Y2godXJsLCB7XG4gICAgICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShzZW5kT2JqKSxcbiAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2tTdGF0dXMpXG4gICAgICAudGhlbih0aGlzLl9wYXJzZUpTT04pO1xuICB9XG5cbiAgZmV0Y2goaWQgPSB0aGlzLmdldCgnaWQnKSkge1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMuZW5kcG9pbnRQcmVmaXh9LyR7dGhpcy5tb2RlbE5hbWV9LyR7aWR9YDtcbiAgICBjb25zb2xlLmxvZyhgbWFrZSBnZXQgeGhyIGNhbGwgdG8gJHt1cmx9YCk7XG5cbiAgICByZXR1cm4gZmV0Y2godXJsLCB7XG4gICAgICAgIG1ldGhvZDogJ2dldCcsXG4gICAgICB9KS50aGVuKHRoaXMuX2NoZWNrU3RhdHVzKVxuICAgICAgLnRoZW4odGhpcy5fcGFyc2VKU09OKTtcbiAgfVxuXG4gIHVwZGF0ZShpZCA9IHRoaXMuZ2V0KCdpZCcpKSB7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5lbmRwb2ludFByZWZpeH0vJHt0aGlzLm1vZGVsTmFtZX0vJHtpZH1gO1xuICAgIGNvbnN0IHNlbmRPYmogPSB7fTtcbiAgICBzZW5kT2JqW3RoaXMubW9kZWxOYW1lXSA9IHRoaXMuZ2V0KCk7XG4gICAgY29uc29sZS5sb2coYG1ha2UgdXBkYXRlIHhociBjYWxsIHRvICR7dXJsfWAsIHNlbmRPYmopO1xuXG4gICAgLy8gR2l0aHViJ3MgZmV0Y2ggcHJvamVjdCBkb2VzbnQgYXBwZWFyIHRvIHN1cHBvcnQgVVBEQVRFXG4gICAgLy8gVE9ETzogaW52ZXN0aWdhdGUgdGhlIGFib3ZlIHN0YXRlbWVudFxuICAgIC8vIGZldGNoKHVybCwge1xuICAgIC8vICAgbWV0aG9kOiAnVVBEQVRFJyxcbiAgICAvLyAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHNlbmRPYmopXG4gICAgLy8gfSk7XG4gIH1cblxuICBkZXN0cm95KGlkID0gdGhpcy5nZXQoJ2lkJykpIHtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmVuZHBvaW50UHJlZml4fS8ke3RoaXMubW9kZWxOYW1lfS8ke2lkfWA7XG4gICAgY29uc29sZS5sb2coYG1ha2UgZGVsZXRlIHhociBjYWxsIHRvICR7dXJsfWApO1xuXG4gICAgcmV0dXJuIGZldGNoKHVybCwge1xuICAgICAgbWV0aG9kOiAnZGVsZXRlJyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrU3RhdHVzKVxuICAgIC50aGVuKHRoaXMuX3BhcnNlSlNPTik7XG4gIH1cbn1cbiIsIi8vIGFsbG93aW5nIGZvci4ub2Ygb2Ygbm9kZWxpc3RzIGZvciBDaHJvbWUgc3VwcG9ydFxuTm9kZUxpc3QucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBBcnJheS5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXTtcbmltcG9ydCB7VXRpbHN9IGZyb20gJy4vVXRpbHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaW5kaW5nIHtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5fZmluZEJpbmRhYmxlKCk7XG4gICAgdGhpcy51dGlscyA9IG5ldyBVdGlscygpO1xuXG4gICAgbGV0IGN1cnJlbnREYXRhID0gY3VycmVudERhdGEgfHwge307XG5cbiAgICAvLyB3YXRjaGluZyB0aGlzLmRhdGEgZm9yIHByb2dyYW1tYXRpY2FsIHVwZGF0ZXNcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBpZiAodGhpcy51dGlscy5jb21wYXJlKGN1cnJlbnREYXRhLCB0aGlzLmRhdGEpID09PSBmYWxzZSkge1xuICAgICAgICBjdXJyZW50RGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5kYXRhKSk7XG4gICAgICAgIHRoaXMuX3BvcHVsYXRlQmluZGluZ3MoKTtcbiAgICAgIH1cbiAgICB9LCAxMCk7XG4gIH1cblxuICBfcG9wdWxhdGVCaW5kaW5ncygpIHtcbiAgICBmb3IgKGNvbnN0IGVsbSBvZiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbbGlhaXNvbi1iaW5kXScpKSB7XG4gICAgICBjb25zdCBiaW5kTmFtZSA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdsaWFpc29uLWJpbmQnKTtcblxuICAgICAgLy8gcHJldmVudCB0aGUgaW5wdXQgeW91cmUgdHlwaW5nIGluIGZyb20gdXBkYXRpbmcuIHByZXZlbnRzIHRoZSBjdXJzb3IgZnJvbSBqdW1waW5nIHRvIHRoZSBlbmRcbiAgICAgIC8vIG9ubHkgdXBkYXRlcyBiaW5kaW5ncyB0aGF0IG5lZWQgdG8gYmUgdXBkYXRlZFxuICAgICAgaWYgKGVsbSAhPT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiAoZWxtLmdldEF0dHJpYnV0ZSgnbGlhaXNvbi1iaW5kJykgPT09IGJpbmROYW1lIHx8IGJpbmROYW1lID09PSBudWxsKSkge1xuICAgICAgICB0aGlzLl9zZXRFbGVtZW50Q29udGVudChlbG0sIHRoaXMuX2dldFZhbHVlKHRoaXMuZGF0YSwgZWxtLmdldEF0dHJpYnV0ZSgnbGlhaXNvbi1iaW5kJykpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfZmluZEJpbmRhYmxlKCkge1xuICAgIGZvciAoY29uc3QgZWxtIG9mIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tsaWFpc29uLWJpbmRdJykpIHtcbiAgICAgIGVsbS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIC8vIHNldHRpbWVvdXQgYWxsb3dzIHRoZSBrZXlkb3duIGV2ZW50IGdvIGdldCB0aGUgbmV3IHZhbHVlXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5fc2V0VmFsdWUodGhpcy5kYXRhLCBlbG0uZ2V0QXR0cmlidXRlKCdsaWFpc29uLWJpbmQnKSwgZXZlbnQuc3JjRWxlbWVudC52YWx1ZSkpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgX3NldEVsZW1lbnRDb250ZW50KGVsZW1lbnQsIHZhbHVlKSB7XG4gICAgLy8gYWxsb3dzIG11bHRpcGxlIGNvbXBvbmVudHNcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xuICB9XG5cbiAgX3NldFZhbHVlKG9iaiwgYWNjZXNzLCB2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YoYWNjZXNzKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGFjY2VzcyA9IGFjY2Vzcy5zcGxpdCgnLicpO1xuICAgIH1cbiAgICBpZiAoYWNjZXNzLmxlbmd0aCA+IDEgJiYgb2JqW2FjY2Vzc1swXV0pIHtcbiAgICAgIHRoaXMuX3NldFZhbHVlKG9ialthY2Nlc3Muc2hpZnQoKV0sIGFjY2VzcywgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG9ialthY2Nlc3NbMF1dID09PSAnc3RyaW5nJykge1xuICAgICAgb2JqW2FjY2Vzc1swXV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICBfZ2V0VmFsdWUob2JqLCBhY2Nlc3MpIHtcbiAgICBpZiAodHlwZW9mKGFjY2VzcykgPT09ICdzdHJpbmcnKSB7XG4gICAgICBhY2Nlc3MgPSBhY2Nlc3Muc3BsaXQoJy4nKTtcbiAgICB9XG4gICAgaWYgKGFjY2Vzcy5sZW5ndGggPiAxICYmIG9ialthY2Nlc3NbMF1dKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZ2V0VmFsdWUob2JqW2FjY2Vzcy5zaGlmdCgpXSwgYWNjZXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG9ialthY2Nlc3NbMF1dO1xuICAgIH1cbiAgfVxuXG4gIHJlZnJlc2goZGF0YSkge1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5fcG9wdWxhdGVCaW5kaW5ncygpO1xuICB9XG59XG4iLCJpbXBvcnQge1V0aWxzfSBmcm9tICcuL1V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUm91dGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy51dGlscyA9IG5ldyBVdGlscygpO1xuICAgIHRoaXMudmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tsaWFpc29uLXZpZXddJyk7XG4gICAgdGhpcy5wYXRocyA9IFtdO1xuICAgIHRoaXMud2lsZGNhcmRzID0gW107XG4gICAgLy8gZ29lcyB0byBoYXNoIHVybFxuICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5nbyh3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSkpLCAwKTtcbiAgICAvLyBhbGxvd3MgYmFjay9mb3J3YXJkIGJ1dHRvbnNcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCAoZXZlbnQpID0+IHRoaXMuZ28oZXZlbnQuc3RhdGUgfHwgd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpLCBmYWxzZSkpO1xuICB9XG5cbiAgc3RhdGUoZGF0YSkge1xuICAgIGlmIChkYXRhLm5hbWUuaW5kZXhPZignOicpID4gMCkge1xuICAgICAgdGhpcy53aWxkY2FyZHMucHVzaChkYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wYXRocy5wdXNoKGRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGZhbGxiYWNrKGRhdGEpIHtcbiAgICB0aGlzLnBhdGhzLnB1c2goZGF0YSk7XG4gICAgdGhpcy5fZmFsbGJhY2sgPSBkYXRhO1xuICB9XG5cbiAgLy8gaW50ZWdyYXRpb24gdGVzdHMgY292ZXIgdGhpc1xuICBnbyhyb3V0ZSkge1xuICAgIGNvbnNvbGUubG9nKGBnb2luZyB0byBzdGF0ZSAke3JvdXRlfWApO1xuICAgIGNvbnN0IG9iaiA9IHRoaXMuX2ZpbmRSb3V0ZUluUGF0aHMocm91dGUpO1xuICAgIGlmICghb2JqKSB7XG4gICAgICB0aGlzLmdvKHRoaXMuX2ZhbGxiYWNrLm5hbWUpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmZXRjaChvYmoudGVtcGxhdGVVcmwpXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTtcbiAgICAgIH0pLnRoZW4oKHRlbXBsYXRlKSA9PiB7XG4gICAgICAgIHRoaXMudmlldy5pbm5lckhUTUwgPSB0ZW1wbGF0ZTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLy8gVE9ETzogY2xlYW4gdGhpcyB1cC4gdGhlcmUgaGFzIHRvIGJlIGEgYmV0dGVyIHdheVxuICBfZmluZFJvdXRlSW5QYXRocyhyb3V0ZSkge1xuICAgIGZvciAoY29uc3QgcGF0aCBvZiB0aGlzLnBhdGhzKSB7XG4gICAgICBpZiAocGF0aC5uYW1lID09PSByb3V0ZSkgcmV0dXJuIHBhdGg7XG4gICAgfVxuICAgIHJvdXRlID0gcm91dGUuc3Vic3RyaW5nKDEpLnNwbGl0KCcvJyk7XG4gICAgZm9yIChjb25zdCB3aWxkY2FyZCBvZiB0aGlzLndpbGRjYXJkcykge1xuICAgICAgY29uc3QgX3dpbGRjYXJkID0gd2lsZGNhcmQubmFtZS5zdWJzdHJpbmcoMSkuc3BsaXQoJy8nKTtcbiAgICAgIGlmIChfd2lsZGNhcmQubGVuZ3RoID09PSByb3V0ZS5sZW5ndGgpIHtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBsZW4gPSBfd2lsZGNhcmQubGVuZ3RoOyBpbmRleCA8IGxlbjsgaW5kZXgrKykge1xuICAgICAgICAgIGlmIChfd2lsZGNhcmRbaW5kZXhdLmluZGV4T2YoJzonKSA9PT0gMCkge1xuICAgICAgICAgICAgY29uc3QgdGVtcCA9IF93aWxkY2FyZDtcbiAgICAgICAgICAgIHRlbXBbaW5kZXhdID0gcm91dGVbaW5kZXhdO1xuICAgICAgICAgICAgaWYgKHRoaXMudXRpbHMuY29tcGFyZSh0ZW1wLCByb3V0ZSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHdpbGRjYXJkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLy8gKiBvbiBwYWdlIGxvYWQsIGdldCB1cmwgYW5kIGxvYWQgYXBwcm9wcmlhdGUgdGVtdHBsYXRlXG4vLyAqIG9uIHVybCBjaGFuZ2UsIHVwZGF0ZSB0ZW1wbGF0ZVxuLy8gKiBhbGxvdyB3aWxkY2FyZHMgaW4gcGF0aHMgL3RlbXBsYXRlL3VzZXIvOmlkXG4vLyBwYXNzIHZhcmlhYmxlcyB0byB0ZW1wbGF0ZVxuLy8gYWxsb3cgY29tcG9uZW50IHRvIGJlIGRlY2xhcmVkIGluIHJvdXRlIG9iamVjdFxuLy8gKiBnZXQgc3RhdGUgKGlmIHN0YXRlID09ICdodWhvaG9oYW8nKS4uLlxuLy8gKiB1cGRhdGUgc3RhdGUgb24gZm9yd2FyZC9iYWNrXG4vLyAqIHJvdXRlcyBvbiByZWZyZXNoXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVdGlscyB7XG4gIGNvbnN0cnVjdG9yKCkge31cblxuICBfaGFzaGVyKHZhbCkge1xuICAgIGxldCBoYXNoID0gMDtcbiAgICBsZXQgaW5kZXg7XG4gICAgbGV0IGxlbjtcbiAgICBjb25zdCBzdHJpbmcgPSB2YWwudG9TdHJpbmcoKTtcbiAgICBmb3IgKGluZGV4ID0gMCwgbGVuID0gc3RyaW5nLmxlbmd0aDsgaW5kZXggPCBsZW47IGluZGV4KyspIHtcbiAgICAgIGhhc2ggPSAoKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBzdHJpbmcuY2hhckNvZGVBdChpbmRleCkpICYgMHhGRkZGRkZGRjtcbiAgICB9XG4gICAgcmV0dXJuIGhhc2g7XG4gIH1cblxuICBfb2JqZWN0KHNlbGYsIG9iaiwgcmVzdWx0ID0gMCkge1xuICAgIGZvciAoY29uc3QgcHJvcGVydHkgaW4gb2JqKSB7XG4gICAgICBpZiAodHlwZW9mIG9ialtwcm9wZXJ0eV0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vYmplY3Qoc2VsZiwgb2JqW3Byb3BlcnR5XSwgcmVzdWx0KTtcbiAgICAgIH1cbiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcGVydHkpKSB7XG4gICAgICAgIHJlc3VsdCArPSBzZWxmLl9oYXNoZXIocHJvcGVydHkgKyBzZWxmLl9oYXNoZXIob2JqW3Byb3BlcnR5XSkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgaGFzaChpbnB1dCkge1xuICAgIGNvbnN0IHR5cGVzID0ge1xuICAgICAgJ3N0cmluZyc6IHRoaXMuX2hhc2hlcixcbiAgICAgICdudW1iZXInOiB0aGlzLl9oYXNoZXIsXG4gICAgICAnYm9vbGVhbic6IHRoaXMuX2hhc2hlcixcbiAgICAgICdvYmplY3QnOiB0aGlzLm9iamVjdCxcbiAgICB9O1xuICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgaW5wdXQ7XG5cbiAgICByZXR1cm4gaW5wdXQgIT09IG51bGwgJiYgdHlwZXNbdHlwZV0gPyB0eXBlc1t0eXBlXSh0aGlzLCBpbnB1dCkgKyB0aGlzLl9oYXNoZXIodHlwZSkgOiAwO1xuICB9XG5cbiAgY29tcGFyZUhhc2hlcyhpdGVtQSwgaXRlbUIpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNoKGl0ZW1BKSA9PT0gdGhpcy5oYXNoKGl0ZW1CKTtcbiAgfVxuXG4gIC8vIGZhc3RlciB0aGFuIGNvbXBhcmVIYXNoZXNcbiAgY29tcGFyZShpdGVtQSwgaXRlbUIpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoaXRlbUEpID09PSBKU09OLnN0cmluZ2lmeShpdGVtQik7XG4gIH1cbn1cbiIsImltcG9ydCBMaWFpc29uIGZyb20gJy4vTGlhaXNvbic7XG5pbXBvcnQgQmluZGluZyBmcm9tICcuL0JpbmRpbmcnO1xuaW1wb3J0IFVzZXJNb2RlbCBmcm9tICcuL1VzZXJNb2RlbCc7XG5pbXBvcnQgVmlld01vZGVsIGZyb20gJy4vVmlld01vZGVsJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXhhbXBsZSB7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICB0aGlzLmJpbmQgPSBuZXcgTGlhaXNvbihkYXRhKTtcbiAgICBjb25zb2xlLmxvZyh0aGlzLmJpbmQpO1xuICAgIHRoaXMuYmluZGluZyA9IG5ldyBCaW5kaW5nKHRoaXMuYmluZCk7XG4gICAgdGhpcy5leGFtcGxlQmluZGluZygpO1xuICAgIHRoaXMuZXhhbXBsZVJvdXRlcigpO1xuICB9XG5cbiAgZXhhbXBsZUJpbmRpbmcoKSB7XG4gICAgLy8gaGVyZSB5b3UgaGF2ZSBhY2Nlc3MgdG8gdGhpcy5iaW5kLnVzZXIgYW5kIHRoaXMuYmluZC5wcm9ncmFtbWluZ19sYW5ndWFnZXNcbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmJpbmQudXNlcik7XG4gICAgLy8gY29uc29sZS5sb2codGhpcy5iaW5kLnByb2dyYW1taW5nX2xhbmd1YWdlcyk7XG5cbiAgICAvLyBtb2RlbCBleGFtcGxlc1xuICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlck1vZGVsKCk7XG4gICAgdXNlci5zZXQoJ2FnZScsICc4Nzc3Jyk7IC8vIHNob3VsZCBmYWlsXG4gICAgdXNlci5zZXQoJ25hbWUnLCAnbXkgZmlyc3QgbmFtZSBvbiB1c2VyIG1vZGVsJyk7IC8vIHNob3VsZCBwYXNzXG4gICAgdXNlci5zZXQoJ2FnZScsIHtcbiAgICAgIGFnZTogMzMsXG4gICAgfSk7IC8vIHNob3VsZCBmYWlsXG4gICAgdXNlci5zZXQoJ2FnZScsIDk5OSk7IC8vIHNob3VsZCBwYXNzXG4gICAgdXNlci5zZXQoJ2FkZHJlc3MnLCAnbXkgYWRkcmVzcycpOyAvLyBzaG91bGQgcGFzc1xuXG4gICAgLy8gc2V0cyBkYXRhIGJpbmRpbmdcbiAgICAvLyB0aGlzLmJpbmQudXNlci5uYW1lID0gdXNlci5nZXQoJ25hbWUnKVxuICAgIHVzZXIuc2V0KCdhZGRyZXNzJywgdXNlci51cENhc2UoJ215IHNlY29uZCBhZGRyZXNzJykpOyAvLyBzaG91bGQgcGFzcyBhbmQgcG9zdGZpeCBcIiFcIiB0byB0aGUgYWRkcmVzc1xuXG4gICAgdXNlci5zYXZlKCkudGhlbigoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygndGhlbicpO1xuICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ3JlcXVlc3QgZmFpbGVkJywgZXJyb3IpO1xuICAgIH0pO1xuICAgIHVzZXIudXBkYXRlKCk7XG4gICAgdXNlci5mZXRjaCgpLnRoZW4oKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ3RoZW4nKTtcbiAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdyZXF1ZXN0IGZhaWxlZCcsIGVycm9yKTtcbiAgICB9KTtcbiAgICB1c2VyLmRlc3Ryb3koKS50aGVuKCgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCd0aGVuJyk7XG4gICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygncmVxdWVzdCBmYWlsZWQnLCBlcnJvcik7XG4gICAgfSk7XG5cbiAgICAvLyBzZWNvbmQgbW9kZWxcbiAgICBjb25zdCB2aWV3bW9kZWwgPSBuZXcgVmlld01vZGVsKCk7XG4gICAgLy8gc2hvdWxkIHBhc3NcbiAgICB2aWV3bW9kZWwuc2V0KCdzaW5nbGUnLCAndXBkYXRlZCB2aWEgdmlld21vZGVsIG1vZGVsIHNldCBmdW5jdGlvbicpO1xuICAgIC8vIHNob3VsZCBwYXNzXG4gICAgdmlld21vZGVsLnNldCgndXNlci5uYW1lJywgJ215IHNlY29uZCBleGFtcGxlIG5hbWUnKTtcbiAgICAvLyBzaG91bGQgZmFpbFxuICAgIHZpZXdtb2RlbC5zZXQoJ3VzZXIuYWdlJywge1xuICAgICAgYWdlOiAyMixcbiAgICB9KTtcbiAgICAvLyBzaG91bGQgZmFpbFxuICAgIHZpZXdtb2RlbC5zZXQoJ3VzZXIuYWdlJywgNDQ0KTtcbiAgICAvLyBzaG91bGQgZmFpbFxuICAgIHZpZXdtb2RlbC5zZXQoJ3VzZXIuYWRkcmVzcycsIDc3ODc4KTtcbiAgICAvLyBzaG91bGQgcGFzc1xuICAgIHZpZXdtb2RlbC5zZXQoJ3VzZXIuYWRkcmVzcycsICdteSBzZWNvbmQgYWRkcmVzcycpO1xuXG4gICAgLy8gc2V0cyBkYXRhIGJpbmRpbmdcbiAgICAvLyB0aGlzLmJpbmQgPSB2aWV3bW9kZWwuZ2V0KClcbiAgICAvLyB0aGlzLmJpbmQudXNlciA9IHVzZXIuZ2V0KClcbiAgICB0aGlzLmJpbmRpbmcucmVmcmVzaCh0aGlzLmJpbmQpO1xuICB9XG5cbiAgZXhhbXBsZVJvdXRlcigpIHtcbiAgICAvLyBjaGFuZ2Ugc3RhdGUgdG8gL2xpc3RcbiAgICAvLyByb3V0ZXIuZ28oJ2hvZG9yLzEyJywge215ZGF0YToxMjM0NTU2LCBteW9iajp7bmFtZTonc2hlcmxvY2snfX0pO1xuICAgIC8vIHNldFRpbWVvdXQoKCk9PiB3aW5kb3cucm91dGVyLmdvKCdsaXN0JyksMjAwMClcbiAgfVxufVxuIiwiaW1wb3J0IExpYWlzb24gZnJvbSAnLi9MaWFpc29uJztcbmltcG9ydCBCaW5kaW5nIGZyb20gJy4vQmluZGluZyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV4YW1wbGUyIHtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHRoaXMuYmluZCA9IG5ldyBMaWFpc29uKGRhdGEpO1xuICAgIHRoaXMuYmluZGluZyA9IG5ldyBCaW5kaW5nKHRoaXMuYmluZCk7XG4gICAgICAvLyB0aGlzLmFub3RoZXJGdW5jdGlvbigpXG4gIH1cblxuICBhbm90aGVyRnVuY3Rpb24oKSB7XG4gICAgLy8gaGVyZSB5b3UgaGF2ZSBhY2Nlc3MgdG8gdGhpcy5kYXRhLnVzZXIgYW5kIHRoaXMuZGF0YS5wcm9ncmFtbWluZ19sYW5ndWFnZXNcbiAgICBjb25zb2xlLmxvZyh0aGlzLmJpbmQuc3RyaW5nKTtcbiAgfVxufVxuIiwiLy8gcHV0cyByb3V0ZXMgb24gdGhlIHJvdXRlciBjbGFzc1xuXG5pbXBvcnQgUm91dGVyIGZyb20gJy4vUm91dGVyJztcbi8vIFRPRE86IG5vdCBhdHRhY2ggdGhpcyB0byB0aGUgZ2xvYmFsIG5hbWVzcGFjZVxud2luZG93LnJvdXRlciA9IHdpbmRvdy5yb3V0ZXIgfHwgbmV3IFJvdXRlcigpO1xud2luZG93LnJvdXRlci5zdGF0ZSh7XG4gIG5hbWU6ICcvdXNlcnMnLFxuICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy91c2VyaW5kZXguaHRtbCcsXG59KS5zdGF0ZSh7XG4gIG5hbWU6ICcvdXNlci86aWQnLFxuICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy91c2VyLmh0bWwnLFxufSkuc3RhdGUoe1xuICBuYW1lOiAnL3VzZXIvOmlkL2RldGFpbHMnLFxuICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy91c2VyZGV0YWlscy5odG1sJyxcbn0pLnN0YXRlKHtcbiAgbmFtZTogJy91c2VyLzppZC86c3ViaWQnLFxuICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy91c2Vyc3ViLmh0bWwnLFxufSkuc3RhdGUoe1xuICBuYW1lOiAnL2xpc3QnLFxuICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9saXN0Lmh0bWwnLFxufSkuc3RhdGUoe1xuICBuYW1lOiAnLycsXG4gIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL2xpc3QuaHRtbCcsXG59KS5mYWxsYmFjayh7XG4gIG5hbWU6ICcvNDA0JyxcbiAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvNDA0Lmh0bWwnLFxufSk7XG4iLCJpbXBvcnQgQmFzZU1vZGVsIGZyb20gJy4vQmFzZU1vZGVsJztcblxuZXhwb3J0IGNsYXNzIFVzZXJNb2RlbCBleHRlbmRzIEJhc2VNb2RlbCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCd1c2VyJywge1xuICAgICAgaWQ6IHtcbiAgICAgICAgdmFsdWU6IDc4OTc4NyxcbiAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICB9LFxuICAgICAgbmFtZToge1xuICAgICAgICB2YWx1ZTogJ25hbWUnLFxuICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgIH0sXG4gICAgICBhZGRyZXNzOiB7XG4gICAgICAgIHZhbHVlOiAnMjIxYiBiYWtlJyxcbiAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICB9LFxuICAgICAgYWdlOiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvLyBleGFtcGxlIG1vZGVsIGhlbHBlclxuICB1cENhc2Uoc3RyKSB7XG4gICAgcmV0dXJuIHN0ci50b1VwcGVyQ2FzZSgpO1xuICB9XG59XG4iLCJpbXBvcnQgQmFzZU1vZGVsIGZyb20gJy4vQmFzZU1vZGVsJztcblxuZXhwb3J0IGNsYXNzIFZpZXdNb2RlbCBleHRlbmRzIEJhc2VNb2RlbCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCd2aWV3Jywge1xuICAgICAgc2luZ2xlOiB7XG4gICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICB2YWx1ZTogJ2Zyb20gc2NoZW1hJyxcbiAgICAgIH0sXG4gICAgICB1c2VyOiB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICB2YWx1ZToge1xuICAgICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICAgIHZhbHVlOiA4ODg4OCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgdmFsdWU6ICdTaGVybG9jayBIb2xtZXMnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYWRkcmVzczoge1xuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICB2YWx1ZTogJzIyMWIgQmFrZXIgU3RyZWV0JyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHByb2dyYW1taW5nTGFuZ3VhZ2VzOiB7XG4gICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgIHZhbHVlOiBbJ2phdmFzY3JpcHQnLCAncnVieSddLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
