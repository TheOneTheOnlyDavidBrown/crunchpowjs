"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function loadComponent(e,t){new window[e](t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),BaseModel=function(){function e(t,n){_classCallCheck(this,e),this.modelName=t,this.data=n}return _createClass(e,[{key:"set",value:function(e,t){var n=this._existsInSchema(this.data,e,t);if(!n)return void console.warn('Not setting "'+e+'" in '+this.modelName+' model to "'+t+'". Doesnt exist in the schema');var r=this._checkType(this.data,e,t);return r?void this._setValue(this.data,e,t):void console.warn('Not setting "'+e+'" in '+this.modelName+' model to "'+t+'". It isnt the right type')}},{key:"get",value:function(e){return e?this._getValue(this.data,e):this._getData(this.data)}},{key:"_existsInSchema",value:function(e,t,n){return t="string"==typeof t?t.split("."):t,t.length>1&&e[t[0]]?this._existsInSchema(e[t.shift()].value,t,n):e[t[0]]?!0:!1}},{key:"_checkType",value:function(e,t,n){return t="string"==typeof t?t.split("."):t,t.length>1&&e[t[0]]?this._checkType(e[t.shift()].value,t,n):e[t[0]].type===typeof n}},{key:"_getData",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];for(var n in e)"object"===e[n].type?(t[n]={},this._getData(e[n].value,t[n])):t[n]=e[n].value;return t}},{key:"_setValue",value:function(e,t,n){t="string"==typeof t?t.split("."):t,t.length>1&&e[t[0]].value?this._setValue(e[t.shift()].value,t,n):e[t[0]].value&&(e[t[0]].value=n)}},{key:"_getValue",value:function(e,t){return t="string"==typeof t?t.split("."):t,t.length>1&&e[t[0]]?this._getValue(e[t.shift()].value,t):e[t[0]].value||""}},{key:"_checkStatus",value:function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}},{key:"_parseJSON",value:function(e){return e.json()}},{key:"save",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.get("id"):arguments[0],t=this.endpointPrefix+"/"+this.modelName+"/"+e,n={};return n[this.modelName]=this.get(),console.log("make post xhr call to "+t,n),fetch(t,{method:"post",body:JSON.stringify(n)}).then(this._checkStatus).then(this._parseJSON)}},{key:"fetch",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=arguments.length<=0||void 0===arguments[0]?this.get("id"):arguments[0],t=this.endpointPrefix+"/"+this.modelName+"/"+e;return console.log("make get xhr call to "+t),fetch(t,{method:"get"}).then(this._checkStatus).then(this._parseJSON)})},{key:"update",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.get("id"):arguments[0],t=this.endpointPrefix+"/"+this.modelName+"/"+e,n={};n[this.modelName]=this.get(),console.log("make update xhr call to "+t,n)}},{key:"destroy",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.get("id"):arguments[0],t=this.endpointPrefix+"/"+this.modelName+"/"+e;return console.log("make delete xhr call to "+t),fetch(t,{method:"delete"}).then(this._checkStatus).then(this._parseJSON)}},{key:"endpointPrefix",set:function(e){this._endpointPrefix=e},get:function(){return this._endpointPrefix||"api/vi"}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();NodeList.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator];var Binding=function(){function e(t){var n=this;_classCallCheck(this,e),this.data=t,this._findBindable(),this.utils=new Utils;var r=r||{};setInterval(function(){n.utils.compare(r,n.data)===!1&&(r=JSON.parse(JSON.stringify(n.data)),n._populateBindings())},10)}return _createClass(e,[{key:"_populateBindings",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=document.querySelectorAll("[liaison-bind]")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var i=r.value,o=document.activeElement.getAttribute("liaison-bind");i===document.activeElement||i.getAttribute("liaison-bind")!==o&&null!==o||this._setElementContent(i,this._getValue(this.data,i.getAttribute("liaison-bind")))}}catch(s){t=!0,n=s}finally{try{!e&&a["return"]&&a["return"]()}finally{if(t)throw n}}}},{key:"_findBindable",value:function(){var e=this,t=!0,n=!1,r=void 0;try{for(var a,i=function(){var t=a.value;t.addEventListener("keydown",function(n){setTimeout(function(){return e._setValue(e.data,t.getAttribute("liaison-bind"),n.srcElement.value)})})},o=document.querySelectorAll("[liaison-bind]")[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)i()}catch(s){n=!0,r=s}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw r}}}},{key:"_setElementContent",value:function(e,t){void 0!==t&&(e.innerHTML=t,e.value=t)}},{key:"_setValue",value:function(e,t,n){"string"==typeof t&&(t=t.split(".")),t.length>1&&e[t[0]]?this._setValue(e[t.shift()],t,n):"string"==typeof e[t[0]]&&(e[t[0]]=n)}},{key:"_getValue",value:function(e,t){return"string"==typeof t&&(t=t.split(".")),t.length>1&&e[t[0]]?this._getValue(e[t.shift()],t):e[t[0]]}},{key:"refresh",value:function(e){this.data=e,this._populateBindings()}}]),e}(),Liaison=function e(t){_classCallCheck(this,e);var n=void 0;for(n in t)this[n]=t[n]},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Router=function(){function e(){var t=this;_classCallCheck(this,e),this.utils=new Utils,this.view=document.querySelector("[liaison-view]"),this.paths=[],this.wildcards=[],setTimeout(function(){return t.go(window.location.hash.substring(1))},0),window.addEventListener("popstate",function(e){return t.go(e.state||window.location.hash.substring(1),!1)})}return _createClass(e,[{key:"state",value:function(e){return e.name.indexOf(":")>0?this.wildcards.push(e):this.paths.push(e),this}},{key:"fallback",value:function(e){this.paths.push(e),this._fallback=e}},{key:"go",value:function(e){var t=this;console.log("going to state "+e);var n=this._findRouteInPaths(e);return n?void fetch(n.templateUrl).then(function(e){return e.text()}).then(function(e){t.view.innerHTML=e}):(this.go(this._fallback.name),!1)}},{key:"_findRouteInPaths",value:function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=this.paths[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;if(o.name===e)return o}}catch(s){n=!0,r=s}finally{try{!t&&i["return"]&&i["return"]()}finally{if(n)throw r}}e=e.substring(1).split("/");var l=!0,u=!1,c=void 0;try{for(var h,f=this.wildcards[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var d=h.value,p=d.name.substring(1).split("/");if(p.length===e.length)for(var v=0,y=p.length;y>v;v++)if(0===p[v].indexOf(":")){var g=p;if(g[v]=e[v],this.utils.compare(g,e))return d}}}catch(s){u=!0,c=s}finally{try{!l&&f["return"]&&f["return"]()}finally{if(u)throw c}}return!1}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Utils=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"_hasher",value:function(e){var t=0,n=void 0,r=void 0,a=e.toString();for(n=0,r=a.length;r>n;n++)t=(t<<5)-t+a.charCodeAt(n)&4294967295;return t}},{key:"object",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];for(var r in t){if("object"==typeof t[r])return this.object(e,t[r],n);hasOwnProperty.call(t,r)&&(n+=e._hasher(r+e._hasher(t[r])))}return n}},{key:"hash",value:function(e){var t={string:this._hasher,number:this._hasher,"boolean":this._hasher,object:this.object},n=typeof e;return null!=e&&t[n]?t[n](this,e)+this._hasher(n):0}},{key:"compareHashes",value:function(e,t){return this.hash(e)===this.hash(t)}},{key:"compare",value:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Example=function(){function e(t){_classCallCheck(this,e),this.bind=new Liaison(t),console.log(this.bind),this.binding=new Binding(this.bind),this.exampleBinding(),this.exampleRouter()}return _createClass(e,[{key:"exampleBinding",value:function(){var e=new UserModel;e.set("age","8777"),e.set("name","my first name on user model"),e.set("age",{age:33}),e.set("age",999),e.set("address","my address"),e.set("address",e.upCase("my second address")),e.save().then(function(){console.log("then")})["catch"](function(e){console.log("request failed",e)}),e.update(),e.fetch().then(function(){console.log("then")})["catch"](function(e){console.log("request failed",e)}),e.destroy().then(function(){console.log("then")})["catch"](function(e){console.log("request failed",e)});var t=new ViewModel;t.set("single","updated via viewmodel model set function"),t.set("user.name","my second example name"),t.set("user.age",{age:22}),t.set("user.age",444),t.set("user.address",77878),t.set("user.address","my second address"),this.binding.refresh(this.bind)}},{key:"exampleRouter",value:function(){}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Example2=function(){function e(t){_classCallCheck(this,e),this.bind=new Liaison(t),new Binding(this.bind)}return _createClass(e,[{key:"anotherFunction",value:function(){console.log(this.bind.string)}}]),e}();window.router=window.router||new Router,router.state({name:"/users",templateUrl:"templates/userindex.html"}).state({name:"/user/:id",templateUrl:"templates/user.html"}).state({name:"/user/:id/details",templateUrl:"templates/userdetails.html"}).state({name:"/user/:id/:subid",templateUrl:"templates/usersub.html"}).state({name:"/list",templateUrl:"templates/list.html"}).state({name:"/",templateUrl:"templates/list.html"}).fallback({name:"/404",templateUrl:"templates/404.html"});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var a=e,i=t,o=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(o)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=i,n=o,r=!0}},UserModel=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"user",{id:{value:789787,type:"number"},name:{value:"name",type:"string"},address:{value:"221b bake",type:"string"},age:{value:null,type:"number"}})}return _inherits(t,e),_createClass(t,[{key:"upCase",value:function(e){return e.toUpperCase()}}]),t}(BaseModel),_get=function(e,t,n){for(var r=!0;r;){var a=e,i=t,o=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(o)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=i,n=o,r=!0}},ViewModel=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"view",{single:{type:"string",value:"from schema"},user:{type:"object",value:{id:{type:"number",value:88888},name:{type:"string",value:"Sherlock Holmes"},address:{type:"string",value:"221b Baker Street"}}},programming_languages:{type:"array",value:["javascript","ruby"]}})}return _inherits(t,e),t}(BaseModel);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5taW4uanMiLCJMaWFpc29uLmpzIiwiQmFzZU1vZGVsLmpzIiwiQmluZGluZy5qcyIsIlJvdXRlci5qcyIsIlV0aWxzLmpzIiwic2NyaXB0cy9FeGFtcGxlLmpzIiwic2NyaXB0cy9FeGFtcGxlMi5qcyIsInNjcmlwdHMvUm91dGVzLmpzIiwic2NyaXB0cy9Vc2VyTW9kZWwuanMiLCJzY3JpcHRzL1ZpZXdNb2RlbC5qcyJdLCJuYW1lcyI6WyJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwibG9hZENvbXBvbmVudCIsIm1vZHVsZSIsImRhdGEiLCJ3aW5kb3ciLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJwcm90b3R5cGUiLCJPYmplY3QiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsInZhbHVlIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiQmFzZU1vZGVsIiwibW9kZWxOYW1lIiwic2NoZW1hIiwidGhpcyIsImV4aXN0c0luU2NoZW1hIiwiX2V4aXN0c0luU2NoZW1hIiwiY29uc29sZSIsIndhcm4iLCJ0eXBlTWF0Y2hlcyIsIl9jaGVja1R5cGUiLCJfc2V0VmFsdWUiLCJhY2Nlc3MiLCJfZ2V0VmFsdWUiLCJfZ2V0RGF0YSIsIm9iaiIsInNwbGl0Iiwic2hpZnQiLCJ0eXBlIiwibmV3T2JqIiwiYXJndW1lbnRzIiwidW5kZWZpbmVkIiwiZWxlbWVudCIsInJlc3BvbnNlIiwic3RhdHVzIiwiZXJyb3IiLCJFcnJvciIsInN0YXR1c1RleHQiLCJqc29uIiwiaWQiLCJnZXQiLCJ1cmwiLCJlbmRwb2ludFByZWZpeCIsInNlbmRPYmoiLCJsb2ciLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidGhlbiIsIl9jaGVja1N0YXR1cyIsIl9wYXJzZUpTT04iLCJfZmV0Y2giLCJhcHBseSIsInRvU3RyaW5nIiwic2V0IiwicHJlZml4IiwiX2VuZHBvaW50UHJlZml4IiwiTm9kZUxpc3QiLCJTeW1ib2wiLCJpdGVyYXRvciIsIkFycmF5IiwiQmluZGluZyIsIl90aGlzIiwiX2ZpbmRCaW5kYWJsZSIsInV0aWxzIiwiVXRpbHMiLCJjdXJyZW50RGF0YSIsInNldEludGVydmFsIiwiY29tcGFyZSIsInBhcnNlIiwiX3BvcHVsYXRlQmluZGluZ3MiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uIiwiX2RpZEl0ZXJhdG9yRXJyb3IiLCJfaXRlcmF0b3JFcnJvciIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmV4dCIsImRvbmUiLCJlbG0iLCJiaW5kTmFtZSIsImFjdGl2ZUVsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJfc2V0RWxlbWVudENvbnRlbnQiLCJlcnIiLCJfdGhpczIiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiIsIl9kaWRJdGVyYXRvckVycm9yMiIsIl9pdGVyYXRvckVycm9yMiIsIl9zdGVwMiIsIl9sb29wIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJzZXRUaW1lb3V0Iiwic3JjRWxlbWVudCIsIl9pdGVyYXRvcjIiLCJpbm5lckhUTUwiLCJMaWFpc29uIiwiZGF0dW0iLCJSb3V0ZXIiLCJ2aWV3IiwicXVlcnlTZWxlY3RvciIsInBhdGhzIiwid2lsZGNhcmRzIiwiZ28iLCJsb2NhdGlvbiIsImhhc2giLCJzdWJzdHJpbmciLCJldmVudCIsInN0YXRlIiwibmFtZSIsImluZGV4T2YiLCJwdXNoIiwiX2ZhbGxiYWNrIiwicm91dGUiLCJfZmluZFJvdXRlSW5QYXRocyIsInRlbXBsYXRlVXJsIiwidGV4dCIsInRlbXBsYXRlIiwicGF0aCIsIndpbGRjYXJkIiwiX3dpbGRjYXJkIiwibCIsInRlbXAiLCJ2YWwiLCJzdHJpbmciLCJjaGFyQ29kZUF0Iiwic2VsZiIsInJlc3VsdCIsInByb3BlcnR5Iiwib2JqZWN0IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiX2hhc2hlciIsImlucHV0IiwidHlwZXMiLCJudW1iZXIiLCJib29sZWFuIiwiYSIsImIiLCJFeGFtcGxlIiwiYmluZCIsImJpbmRpbmciLCJleGFtcGxlQmluZGluZyIsImV4YW1wbGVSb3V0ZXIiLCJ1c2VyIiwiVXNlck1vZGVsIiwiYWdlIiwidXBDYXNlIiwic2F2ZSIsInVwZGF0ZSIsImRlc3Ryb3kiLCJ2aWV3bW9kZWwiLCJWaWV3TW9kZWwiLCJyZWZyZXNoIiwiRXhhbXBsZTIiLCJyb3V0ZXIiLCJmYWxsYmFjayIsIl9nZXQiLCJfeCIsIl94MiIsIl94MyIsIl9hZ2FpbiIsInJlY2VpdmVyIiwiZGVzYyIsInBhcmVudCIsImdldHRlciIsIkZ1bmN0aW9uIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZ2V0UHJvdG90eXBlT2YiLCJfQmFzZU1vZGVsIiwiYWRkcmVzcyIsInN0ciIsInRvVXBwZXJDYXNlIiwic2luZ2xlIiwicHJvZ3JhbW1pbmdfbGFuZ3VhZ2VzIl0sIm1hcHBpbmdzIjoiQUFDQSxZQUlBLFNBQVNBLGlCQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQWdNaEgsUUFBU0gsaUJBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBOEloSCxRQUFTSCxpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0MxVWpHLFFBQVNDLGVBQWNDLEVBQVFDLEdBQzVDLEdBQUlDLFFBQU9GLEdBQVFDLEdEMlZyQixRQUFTTixpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFB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QUFXc0ksR0FBUyxFQUFzQixPQUFYaEMsSUFBaUJBLEVBQVNxQyxTQUFTcEwsVUFBVyxJQUFJaUwsR0FBT2hMLE9BQU9vTCx5QkFBeUJ0QyxFQUFRRCxFQUFXLElBQWFyRyxTQUFUd0ksRUFBSixDQUFpTixHQUFJLFNBQVdBLEdBQVEsTUFBT0EsR0FBSzdLLEtBQWdCLElBQUkrSyxHQUFTRixFQUFLL0gsR0FBSyxPQUFlVCxVQUFYMEksRUFBK0IxSSxPQUFvQjBJLEVBQU9sQyxLQUFLK0IsR0FBcFUsR0FBSUUsR0FBU2pMLE9BQU9xTCxlQUFldkMsRUFBUyxJQUFlLE9BQVhtQyxFQUFtQixNQUFPekksT0FBb0JtSSxHQUFLTSxFQUFRTCxFQUFNL0IsRUFBVWdDLEVBQU1FLEVBQVVELEdBQVMsSVV6dUI3Y1QsVUFBUyxTQUFBaUIsR0FDVCxRQURBakIsS1ZtdkJUakwsZ0JBQWdCbUMsS1VudkJQOEksR0FFVEssS0FBQTFLLE9BQUFxTCxlQUZTaEIsRUFBU3RLLFdBQUEsY0FBQXdCLE1BQUF5SCxLQUFBekgsS0FFWixRQUNKbUssUUFDRXJKLEtBQU0sU0FDTmxDLE1BQU8sZUFFVDBKLE1BQ0V4SCxLQUFNLFNBQ05sQyxPQUNFNkMsSUFDRVgsS0FBTSxTQUNObEMsTUFBTyxPQUVUdUgsTUFDRXJGLEtBQU0sU0FDTmxDLE1BQU8sbUJBRVRvTCxTQUNFbEosS0FBTSxTQUNObEMsTUFBTyx1QkFJYndMLHVCQUNFdEosS0FBTSxRQUNObEMsT0FBUSxhQUFjLFdWd3ZCNUIsTUFsQ0FQLFdVaHZCV3lLLEVBQVNpQixHQUFUakIsR0FBa0JqSiIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOltudWxsLCIndXNlIHN0cmljdCc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaWFpc29uIHtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIGxldCBkYXR1bTtcbiAgICBmb3IgKGRhdHVtIGluIGRhdGEpIHtcbiAgICAgIHRoaXNbZGF0dW1dID0gZGF0YVtkYXR1bV07XG4gICAgfVxuICB9XG59XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBsb2FkQ29tcG9uZW50KG1vZHVsZSwgZGF0YSkge1xuICBuZXcgd2luZG93W21vZHVsZV0oZGF0YSk7XG59XG4iLCIvLyBUT0RPOiBhbGxvdyBhIHNoYXJlZCBmcm9udGVuZC9iYWNrZW5kIHNjaGVtYSBmaWxlXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNlTW9kZWwge1xuICBjb25zdHJ1Y3Rvcihtb2RlbE5hbWUsIHNjaGVtYSkge1xuICAgIHRoaXMubW9kZWxOYW1lID0gbW9kZWxOYW1lO1xuICAgIHRoaXMuZGF0YSA9IHNjaGVtYTtcbiAgfVxuXG4gIHNldChrZXksIHZhbHVlKSB7XG4gICAgbGV0IGV4aXN0c0luU2NoZW1hID0gdGhpcy5fZXhpc3RzSW5TY2hlbWEodGhpcy5kYXRhLCBrZXksIHZhbHVlKTtcbiAgICBpZiAoIWV4aXN0c0luU2NoZW1hKSB7XG4gICAgICBjb25zb2xlLndhcm4oYE5vdCBzZXR0aW5nIFwiJHtrZXl9XCIgaW4gJHt0aGlzLm1vZGVsTmFtZX0gbW9kZWwgdG8gXCIke3ZhbHVlfVwiLiBEb2VzbnQgZXhpc3QgaW4gdGhlIHNjaGVtYWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgdHlwZU1hdGNoZXMgPSB0aGlzLl9jaGVja1R5cGUodGhpcy5kYXRhLCBrZXksIHZhbHVlKTtcbiAgICBpZiAoIXR5cGVNYXRjaGVzKSB7XG4gICAgICBjb25zb2xlLndhcm4oYE5vdCBzZXR0aW5nIFwiJHtrZXl9XCIgaW4gJHt0aGlzLm1vZGVsTmFtZX0gbW9kZWwgdG8gXCIke3ZhbHVlfVwiLiBJdCBpc250IHRoZSByaWdodCB0eXBlYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3NldFZhbHVlKHRoaXMuZGF0YSwga2V5LCB2YWx1ZSk7XG4gIH1cblxuICBnZXQoYWNjZXNzKSB7XG4gICAgaWYgKGFjY2Vzcykge1xuICAgICAgcmV0dXJuIHRoaXMuX2dldFZhbHVlKHRoaXMuZGF0YSwgYWNjZXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuX2dldERhdGEodGhpcy5kYXRhKTtcbiAgICB9XG4gIH1cblxuICBfZXhpc3RzSW5TY2hlbWEob2JqLCBhY2Nlc3MsIHZhbHVlKSB7XG4gICAgYWNjZXNzID0gKHR5cGVvZihhY2Nlc3MpID09PSAnc3RyaW5nJykgPyBhY2Nlc3Muc3BsaXQoJy4nKSA6IGFjY2VzcztcbiAgICBpZiAoYWNjZXNzLmxlbmd0aCA+IDEgJiYgb2JqW2FjY2Vzc1swXV0pIHtcbiAgICAgIHJldHVybiB0aGlzLl9leGlzdHNJblNjaGVtYShvYmpbYWNjZXNzLnNoaWZ0KCldLnZhbHVlLCBhY2Nlc3MsIHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG9ialthY2Nlc3NbMF1dID8gdHJ1ZSA6IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIF9jaGVja1R5cGUob2JqLCBhY2Nlc3MsIHZhbHVlKSB7XG4gICAgYWNjZXNzID0gKHR5cGVvZihhY2Nlc3MpID09PSAnc3RyaW5nJykgPyBhY2Nlc3Muc3BsaXQoJy4nKSA6IGFjY2VzcztcbiAgICBpZiAoYWNjZXNzLmxlbmd0aCA+IDEgJiYgb2JqW2FjY2Vzc1swXV0pIHtcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1R5cGUob2JqW2FjY2Vzcy5zaGlmdCgpXS52YWx1ZSwgYWNjZXNzLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvYmpbYWNjZXNzWzBdXS50eXBlID09PSB0eXBlb2YgdmFsdWU7XG4gICAgfVxuICB9XG5cbiAgX2dldERhdGEob2JqLCBuZXdPYmogPSB7fSkge1xuICAgIGZvciAobGV0IGVsZW1lbnQgaW4gb2JqKSB7XG4gICAgICBpZiAob2JqW2VsZW1lbnRdLnR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIG5ld09ialtlbGVtZW50XSA9IHt9O1xuICAgICAgICB0aGlzLl9nZXREYXRhKG9ialtlbGVtZW50XS52YWx1ZSwgbmV3T2JqW2VsZW1lbnRdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld09ialtlbGVtZW50XSA9IG9ialtlbGVtZW50XS52YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ld09iajtcbiAgfVxuXG4gIF9zZXRWYWx1ZShvYmosIGFjY2VzcywgdmFsdWUpIHtcbiAgICBhY2Nlc3MgPSAodHlwZW9mKGFjY2VzcykgPT09ICdzdHJpbmcnKSA/IGFjY2Vzcy5zcGxpdCgnLicpIDogYWNjZXNzO1xuICAgIGlmIChhY2Nlc3MubGVuZ3RoID4gMSAmJiBvYmpbYWNjZXNzWzBdXS52YWx1ZSkge1xuICAgICAgdGhpcy5fc2V0VmFsdWUob2JqW2FjY2Vzcy5zaGlmdCgpXS52YWx1ZSwgYWNjZXNzLCB2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChvYmpbYWNjZXNzWzBdXS52YWx1ZSkge1xuICAgICAgb2JqW2FjY2Vzc1swXV0udmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICBfZ2V0VmFsdWUob2JqLCBhY2Nlc3MpIHtcbiAgICBhY2Nlc3MgPSAodHlwZW9mKGFjY2VzcykgPT09ICdzdHJpbmcnKSA/IGFjY2Vzcy5zcGxpdCgnLicpIDogYWNjZXNzO1xuICAgIGlmIChhY2Nlc3MubGVuZ3RoID4gMSAmJiBvYmpbYWNjZXNzWzBdXSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2dldFZhbHVlKG9ialthY2Nlc3Muc2hpZnQoKV0udmFsdWUsIGFjY2Vzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvYmpbYWNjZXNzWzBdXS52YWx1ZSB8fCAnJztcbiAgICB9XG4gIH1cblxuICBzZXQgZW5kcG9pbnRQcmVmaXgocHJlZml4KSB7XG4gICAgdGhpcy5fZW5kcG9pbnRQcmVmaXggPSBwcmVmaXg7XG4gIH1cblxuICBnZXQgZW5kcG9pbnRQcmVmaXgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VuZHBvaW50UHJlZml4IHx8ICdhcGkvdmknO1xuICB9XG5cbiAgLy8gVE9ETzogcmVmYWN0b3IgdGhpcyB0byBoZWxwZXJcbiAgX2NoZWNrU3RhdHVzKHJlc3BvbnNlKSB7XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSAyMDAgJiYgcmVzcG9uc2Uuc3RhdHVzIDwgMzAwKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KTtcbiAgICAgIGVycm9yLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBfcGFyc2VKU09OKHJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuXG4gIC8vIFRPRE86IENSVUQgb3BlcmF0aW9ucyB4aHIgY2FsbHMuIHJldHVybiBwcm9taXNlc1xuICBzYXZlKGlkID0gdGhpcy5nZXQoJ2lkJykpIHtcbiAgICBsZXQgdXJsID0gYCR7dGhpcy5lbmRwb2ludFByZWZpeH0vJHt0aGlzLm1vZGVsTmFtZX0vJHtpZH1gO1xuICAgIGxldCBzZW5kT2JqID0ge307XG4gICAgc2VuZE9ialt0aGlzLm1vZGVsTmFtZV0gPSB0aGlzLmdldCgpO1xuICAgIGNvbnNvbGUubG9nKGBtYWtlIHBvc3QgeGhyIGNhbGwgdG8gJHt1cmx9YCwgc2VuZE9iaik7XG5cbiAgICByZXR1cm4gZmV0Y2godXJsLCB7XG4gICAgICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShzZW5kT2JqKVxuICAgICAgfSkudGhlbih0aGlzLl9jaGVja1N0YXR1cylcbiAgICAgIC50aGVuKHRoaXMuX3BhcnNlSlNPTik7XG4gIH1cblxuICBmZXRjaChpZCA9IHRoaXMuZ2V0KCdpZCcpKSB7XG4gICAgbGV0IHVybCA9IGAke3RoaXMuZW5kcG9pbnRQcmVmaXh9LyR7dGhpcy5tb2RlbE5hbWV9LyR7aWR9YDtcbiAgICBjb25zb2xlLmxvZyhgbWFrZSBnZXQgeGhyIGNhbGwgdG8gJHt1cmx9YCk7XG5cbiAgICByZXR1cm4gZmV0Y2godXJsLCB7XG4gICAgICAgIG1ldGhvZDogJ2dldCdcbiAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2tTdGF0dXMpXG4gICAgICAudGhlbih0aGlzLl9wYXJzZUpTT04pO1xuICB9XG5cbiAgdXBkYXRlKGlkID0gdGhpcy5nZXQoJ2lkJykpIHtcbiAgICBsZXQgdXJsID0gYCR7dGhpcy5lbmRwb2ludFByZWZpeH0vJHt0aGlzLm1vZGVsTmFtZX0vJHtpZH1gO1xuICAgIGxldCBzZW5kT2JqID0ge307XG4gICAgc2VuZE9ialt0aGlzLm1vZGVsTmFtZV0gPSB0aGlzLmdldCgpO1xuICAgIGNvbnNvbGUubG9nKGBtYWtlIHVwZGF0ZSB4aHIgY2FsbCB0byAke3VybH1gLCBzZW5kT2JqKTtcblxuICAgIC8vIEdpdGh1YidzIGZldGNoIHByb2plY3QgZG9lc250IGFwcGVhciB0byBzdXBwb3J0IFVQREFURVxuICAgIC8vIFRPRE86IGludmVzdGlnYXRlIHRoZSBhYm92ZSBzdGF0ZW1lbnRcbiAgICAvLyBmZXRjaCh1cmwsIHtcbiAgICAvLyAgIG1ldGhvZDogJ1VQREFURScsXG4gICAgLy8gICBib2R5OiBKU09OLnN0cmluZ2lmeShzZW5kT2JqKVxuICAgIC8vIH0pO1xuICB9XG5cbiAgZGVzdHJveShpZCA9IHRoaXMuZ2V0KCdpZCcpKSB7XG4gICAgbGV0IHVybCA9IGAke3RoaXMuZW5kcG9pbnRQcmVmaXh9LyR7dGhpcy5tb2RlbE5hbWV9LyR7aWR9YDtcbiAgICBjb25zb2xlLmxvZyhgbWFrZSBkZWxldGUgeGhyIGNhbGwgdG8gJHt1cmx9YCk7XG5cbiAgICByZXR1cm4gZmV0Y2godXJsLCB7XG4gICAgICAgIG1ldGhvZDogJ2RlbGV0ZSdcbiAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2tTdGF0dXMpXG4gICAgICAudGhlbih0aGlzLl9wYXJzZUpTT04pO1xuICB9XG59XG4iLCIndXNlIHN0cmljdCc7XG4vL2FsbG93aW5nIGZvci4ub2Ygb2Ygbm9kZWxpc3RzIGZvciBDaHJvbWUgc3VwcG9ydFxuTm9kZUxpc3QucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBBcnJheS5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXTtcbmltcG9ydCB7VXRpbHN9IGZyb20gJy4vVXRpbHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaW5kaW5nIHtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5fZmluZEJpbmRhYmxlKCk7XG4gICAgdGhpcy51dGlscyA9IG5ldyBVdGlscygpO1xuXG4gICAgbGV0IGN1cnJlbnREYXRhID0gY3VycmVudERhdGEgfHwge307XG5cbiAgICAvLyB3YXRjaGluZyB0aGlzLmRhdGEgZm9yIHByb2dyYW1tYXRpY2FsIHVwZGF0ZXNcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBpZiAodGhpcy51dGlscy5jb21wYXJlKGN1cnJlbnREYXRhLCB0aGlzLmRhdGEpID09PSBmYWxzZSkge1xuICAgICAgICBjdXJyZW50RGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5kYXRhKSk7XG4gICAgICAgIHRoaXMuX3BvcHVsYXRlQmluZGluZ3MoKTtcbiAgICAgIH1cbiAgICB9LCAxMCk7XG4gIH1cblxuICBfcG9wdWxhdGVCaW5kaW5ncygpIHtcbiAgICBmb3IgKGxldCBlbG0gb2YgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2xpYWlzb24tYmluZF0nKSkge1xuICAgICAgbGV0IGJpbmROYW1lID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2xpYWlzb24tYmluZCcpO1xuXG4gICAgICAvL3ByZXZlbnQgdGhlIGlucHV0IHlvdXJlIHR5cGluZyBpbiBmcm9tIHVwZGF0aW5nLiBwcmV2ZW50cyB0aGUgY3Vyc29yIGZyb20ganVtcGluZyB0byB0aGUgZW5kXG4gICAgICAvL29ubHkgdXBkYXRlcyBiaW5kaW5ncyB0aGF0IG5lZWQgdG8gYmUgdXBkYXRlZFxuICAgICAgaWYgKGVsbSAhPT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiAoZWxtLmdldEF0dHJpYnV0ZSgnbGlhaXNvbi1iaW5kJykgPT09IGJpbmROYW1lIHx8IGJpbmROYW1lID09PSBudWxsKSkge1xuICAgICAgICB0aGlzLl9zZXRFbGVtZW50Q29udGVudChlbG0sIHRoaXMuX2dldFZhbHVlKHRoaXMuZGF0YSwgZWxtLmdldEF0dHJpYnV0ZSgnbGlhaXNvbi1iaW5kJykpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfZmluZEJpbmRhYmxlKCkge1xuICAgIGZvciAobGV0IGVsbSBvZiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbbGlhaXNvbi1iaW5kXScpKSB7XG4gICAgICBlbG0uYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICAgIC8vc2V0dGltZW91dCBhbGxvd3MgdGhlIGtleWRvd24gZXZlbnQgZ28gZ2V0IHRoZSBuZXcgdmFsdWVcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLl9zZXRWYWx1ZSh0aGlzLmRhdGEsIGVsbS5nZXRBdHRyaWJ1dGUoJ2xpYWlzb24tYmluZCcpLCBlLnNyY0VsZW1lbnQudmFsdWUpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFbGVtZW50Q29udGVudChlbGVtZW50LCB2YWx1ZSkge1xuICAgIC8vIGFsbG93cyBtdWx0aXBsZSBjb21wb25lbnRzXG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICBlbGVtZW50LmlubmVySFRNTCA9IHZhbHVlO1xuICAgIGVsZW1lbnQudmFsdWUgPSB2YWx1ZTtcbiAgfVxuXG4gIF9zZXRWYWx1ZShvYmosIGFjY2VzcywgdmFsdWUpIHtcbiAgICBpZiAodHlwZW9mKGFjY2VzcykgPT09ICdzdHJpbmcnKSB7XG4gICAgICBhY2Nlc3MgPSBhY2Nlc3Muc3BsaXQoJy4nKTtcbiAgICB9XG4gICAgaWYgKGFjY2Vzcy5sZW5ndGggPiAxICYmIG9ialthY2Nlc3NbMF1dKSB7XG4gICAgICB0aGlzLl9zZXRWYWx1ZShvYmpbYWNjZXNzLnNoaWZ0KCldLCBhY2Nlc3MsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBvYmpbYWNjZXNzWzBdXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG9ialthY2Nlc3NbMF1dID0gdmFsdWU7XG4gICAgfVxuICB9XG5cbiAgX2dldFZhbHVlKG9iaiwgYWNjZXNzKSB7XG4gICAgaWYgKHR5cGVvZihhY2Nlc3MpID09PSAnc3RyaW5nJykge1xuICAgICAgYWNjZXNzID0gYWNjZXNzLnNwbGl0KCcuJyk7XG4gICAgfVxuICAgIGlmIChhY2Nlc3MubGVuZ3RoID4gMSAmJiBvYmpbYWNjZXNzWzBdXSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2dldFZhbHVlKG9ialthY2Nlc3Muc2hpZnQoKV0sIGFjY2Vzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvYmpbYWNjZXNzWzBdXTtcbiAgICB9XG4gIH1cblxuICByZWZyZXNoKGRhdGEpIHtcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIHRoaXMuX3BvcHVsYXRlQmluZGluZ3MoKTtcbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuaW1wb3J0IHtVdGlsc30gZnJvbSAnLi9VdGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJvdXRlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudXRpbHMgPSBuZXcgVXRpbHMoKTtcbiAgICB0aGlzLnZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbbGlhaXNvbi12aWV3XScpO1xuICAgIHRoaXMucGF0aHMgPSBbXTtcbiAgICB0aGlzLndpbGRjYXJkcyA9IFtdO1xuICAgIC8vZ29lcyB0byBoYXNoIHVybFxuICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5nbyh3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSkpLCAwKTtcbiAgICAvL2FsbG93cyBiYWNrL2ZvcndhcmQgYnV0dG9uc1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIChldmVudCkgPT4gdGhpcy5nbyhldmVudC5zdGF0ZSB8fCB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSksIGZhbHNlKSk7XG4gIH1cblxuICBzdGF0ZShkYXRhKSB7XG4gICAgaWYgKGRhdGEubmFtZS5pbmRleE9mKCc6JykgPiAwKSB7XG4gICAgICB0aGlzLndpbGRjYXJkcy5wdXNoKGRhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBhdGhzLnB1c2goZGF0YSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZmFsbGJhY2soZGF0YSkge1xuICAgIHRoaXMucGF0aHMucHVzaChkYXRhKTtcbiAgICB0aGlzLl9mYWxsYmFjayA9IGRhdGE7XG4gIH1cblxuICAvLyBpbnRlZ3JhdGlvbiB0ZXN0cyBjb3ZlciB0aGlzXG4gIGdvKHJvdXRlKSB7XG4gICAgY29uc29sZS5sb2coYGdvaW5nIHRvIHN0YXRlICR7cm91dGV9YCk7XG4gICAgbGV0IG9iaiA9IHRoaXMuX2ZpbmRSb3V0ZUluUGF0aHMocm91dGUpO1xuICAgIGlmICghb2JqKSB7XG4gICAgICB0aGlzLmdvKHRoaXMuX2ZhbGxiYWNrLm5hbWUpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmZXRjaChvYmoudGVtcGxhdGVVcmwpXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTtcbiAgICAgIH0pLnRoZW4oKHRlbXBsYXRlKSA9PiB7XG4gICAgICAgIHRoaXMudmlldy5pbm5lckhUTUwgPSB0ZW1wbGF0ZTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLy8gVE9ETzogY2xlYW4gdGhpcyB1cC4gdGhlcmUgaGFzIHRvIGJlIGEgYmV0dGVyIHdheVxuICBfZmluZFJvdXRlSW5QYXRocyhyb3V0ZSkge1xuICAgIGZvciAobGV0IHBhdGggb2YgdGhpcy5wYXRocykge1xuICAgICAgaWYgKHBhdGgubmFtZSA9PT0gcm91dGUpIHJldHVybiBwYXRoO1xuICAgIH1cbiAgICByb3V0ZSA9IHJvdXRlLnN1YnN0cmluZygxKS5zcGxpdCgnLycpO1xuICAgIGZvciAobGV0IHdpbGRjYXJkIG9mIHRoaXMud2lsZGNhcmRzKSB7XG4gICAgICBsZXQgX3dpbGRjYXJkID0gd2lsZGNhcmQubmFtZS5zdWJzdHJpbmcoMSkuc3BsaXQoJy8nKTtcbiAgICAgIGlmIChfd2lsZGNhcmQubGVuZ3RoID09PSByb3V0ZS5sZW5ndGgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBfd2lsZGNhcmQubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgaWYgKF93aWxkY2FyZFtpXS5pbmRleE9mKCc6JykgPT09IDApIHtcbiAgICAgICAgICAgIGxldCB0ZW1wID0gX3dpbGRjYXJkO1xuICAgICAgICAgICAgdGVtcFtpXSA9IHJvdXRlW2ldO1xuICAgICAgICAgICAgaWYgKHRoaXMudXRpbHMuY29tcGFyZSh0ZW1wLCByb3V0ZSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHdpbGRjYXJkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuXG5cbi8vICogb24gcGFnZSBsb2FkLCBnZXQgdXJsIGFuZCBsb2FkIGFwcHJvcHJpYXRlIHRlbXRwbGF0ZVxuLy8gKiBvbiB1cmwgY2hhbmdlLCB1cGRhdGUgdGVtcGxhdGVcbi8vICogYWxsb3cgd2lsZGNhcmRzIGluIHBhdGhzIC90ZW1wbGF0ZS91c2VyLzppZFxuLy8gcGFzcyB2YXJpYWJsZXMgdG8gdGVtcGxhdGVcbi8vIGFsbG93IGNvbXBvbmVudCB0byBiZSBkZWNsYXJlZCBpbiByb3V0ZSBvYmplY3Rcbi8vICogZ2V0IHN0YXRlIChpZiBzdGF0ZSA9PSAnaHVob2hvaGFvJykuLi5cbi8vICogdXBkYXRlIHN0YXRlIG9uIGZvcndhcmQvYmFja1xuLy8gKiByb3V0ZXMgb24gcmVmcmVzaFxuIiwiJ3VzZSBzdHJpY3QnO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXRpbHMge1xuICBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgX2hhc2hlcih2YWwpIHtcbiAgICBsZXQgaGFzaCA9IDAsXG4gICAgICBpLFxuICAgICAgbCxcbiAgICAgIHN0cmluZyA9IHZhbC50b1N0cmluZygpO1xuICAgIGZvciAoaSA9IDAsIGwgPSBzdHJpbmcubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBoYXNoID0gKCgoaGFzaCA8PCA1KSAtIGhhc2gpICsgc3RyaW5nLmNoYXJDb2RlQXQoaSkpICYgMHhGRkZGRkZGRjtcbiAgICB9XG4gICAgcmV0dXJuIGhhc2g7XG4gIH1cblxuICBvYmplY3Qoc2VsZiwgb2JqLCByZXN1bHQgPSAwKSB7XG4gICAgZm9yIChsZXQgcHJvcGVydHkgaW4gb2JqKSB7XG4gICAgICBpZiAodHlwZW9mIG9ialtwcm9wZXJ0eV0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9iamVjdChzZWxmLCBvYmpbcHJvcGVydHldLCByZXN1bHQpO1xuICAgICAgfVxuICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wZXJ0eSkpIHtcbiAgICAgICAgcmVzdWx0ICs9IHNlbGYuX2hhc2hlcihwcm9wZXJ0eSArIHNlbGYuX2hhc2hlcihvYmpbcHJvcGVydHldKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBoYXNoKGlucHV0KSB7XG4gICAgbGV0IHR5cGVzID0ge1xuICAgICAgJ3N0cmluZyc6IHRoaXMuX2hhc2hlcixcbiAgICAgICdudW1iZXInOiB0aGlzLl9oYXNoZXIsXG4gICAgICAnYm9vbGVhbic6IHRoaXMuX2hhc2hlcixcbiAgICAgICdvYmplY3QnOiB0aGlzLm9iamVjdFxuICAgIH07XG4gICAgbGV0IHR5cGUgPSB0eXBlb2YgaW5wdXQ7XG5cbiAgICByZXR1cm4gaW5wdXQgIT0gbnVsbCAmJiB0eXBlc1t0eXBlXSA/IHR5cGVzW3R5cGVdKHRoaXMsIGlucHV0KSArIHRoaXMuX2hhc2hlcih0eXBlKSA6IDA7XG4gIH1cblxuICBjb21wYXJlSGFzaGVzKGEsIGIpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNoKGEpID09PSB0aGlzLmhhc2goYik7XG4gIH1cblxuICAvL2Zhc3RlciB0aGFuIGNvbXBhcmVIYXNoZXNcbiAgY29tcGFyZShhLCBiKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGEpID09PSBKU09OLnN0cmluZ2lmeShiKTtcbiAgfVxufVxuIiwiaW1wb3J0IExpYWlzb24gZnJvbSAnLi9MaWFpc29uJztcbmltcG9ydCBCaW5kaW5nIGZyb20gJy4vQmluZGluZyc7XG5pbXBvcnQgVXNlck1vZGVsIGZyb20gJy4vVXNlck1vZGVsJztcbmltcG9ydCBWaWV3TW9kZWwgZnJvbSAnLi9WaWV3TW9kZWwnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFeGFtcGxlIHtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHRoaXMuYmluZCA9IG5ldyBMaWFpc29uKGRhdGEpO1xuICAgIGNvbnNvbGUubG9nKHRoaXMuYmluZCk7XG4gICAgdGhpcy5iaW5kaW5nID0gbmV3IEJpbmRpbmcodGhpcy5iaW5kKTtcbiAgICB0aGlzLmV4YW1wbGVCaW5kaW5nKCk7XG4gICAgdGhpcy5leGFtcGxlUm91dGVyKCk7XG4gIH1cblxuICBleGFtcGxlQmluZGluZygpIHtcbiAgICAvLyBoZXJlIHlvdSBoYXZlIGFjY2VzcyB0byB0aGlzLmJpbmQudXNlciBhbmQgdGhpcy5iaW5kLnByb2dyYW1taW5nX2xhbmd1YWdlc1xuICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuYmluZC51c2VyKTtcbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmJpbmQucHJvZ3JhbW1pbmdfbGFuZ3VhZ2VzKTtcblxuICAgIC8vbW9kZWwgZXhhbXBsZXNcbiAgICBsZXQgdXNlciA9IG5ldyBVc2VyTW9kZWwoKTtcbiAgICB1c2VyLnNldCgnYWdlJywgJzg3NzcnKTsgLy8gc2hvdWxkIGZhaWxcbiAgICB1c2VyLnNldCgnbmFtZScsICdteSBmaXJzdCBuYW1lIG9uIHVzZXIgbW9kZWwnKTsgLy9zaG91bGQgcGFzc1xuICAgIHVzZXIuc2V0KCdhZ2UnLCB7XG4gICAgICBhZ2U6IDMzXG4gICAgfSk7IC8vIHNob3VsZCBmYWlsXG4gICAgdXNlci5zZXQoJ2FnZScsIDk5OSk7IC8vc2hvdWxkIHBhc3NcbiAgICB1c2VyLnNldCgnYWRkcmVzcycsICdteSBhZGRyZXNzJyk7IC8vc2hvdWxkIHBhc3NcblxuICAgIC8vc2V0cyBkYXRhIGJpbmRpbmdcbiAgICAvLyB0aGlzLmJpbmQudXNlci5uYW1lID0gdXNlci5nZXQoJ25hbWUnKVxuICAgIHVzZXIuc2V0KCdhZGRyZXNzJywgdXNlci51cENhc2UoJ215IHNlY29uZCBhZGRyZXNzJykpOyAvL3Nob3VsZCBwYXNzIGFuZCBwb3N0Zml4IFwiIVwiIHRvIHRoZSBhZGRyZXNzXG5cbiAgICB1c2VyLnNhdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgY29uc29sZS5sb2coJ3RoZW4nKTtcbiAgICB9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ3JlcXVlc3QgZmFpbGVkJywgZXJyb3IpO1xuICAgIH0pO1xuICAgIHVzZXIudXBkYXRlKCk7XG4gICAgdXNlci5mZXRjaCgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICBjb25zb2xlLmxvZygndGhlbicpO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygncmVxdWVzdCBmYWlsZWQnLCBlcnJvcik7XG4gICAgfSk7XG4gICAgdXNlci5kZXN0cm95KCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgIGNvbnNvbGUubG9nKCd0aGVuJyk7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdyZXF1ZXN0IGZhaWxlZCcsIGVycm9yKTtcbiAgICB9KTtcblxuICAgIC8vIHNlY29uZCBtb2RlbFxuICAgIGxldCB2aWV3bW9kZWwgPSBuZXcgVmlld01vZGVsKCk7XG4gICAgdmlld21vZGVsLnNldCgnc2luZ2xlJywgJ3VwZGF0ZWQgdmlhIHZpZXdtb2RlbCBtb2RlbCBzZXQgZnVuY3Rpb24nKTsgLy8gc2hvdWxkIHBhc3NcbiAgICB2aWV3bW9kZWwuc2V0KCd1c2VyLm5hbWUnLCAnbXkgc2Vjb25kIGV4YW1wbGUgbmFtZScpOyAvL3Nob3VsZCBwYXNzXG4gICAgdmlld21vZGVsLnNldCgndXNlci5hZ2UnLCB7XG4gICAgICAgIGFnZTogMjJcbiAgICAgIH0pOyAvLyBzaG91bGQgZmFpbFxuICAgIHZpZXdtb2RlbC5zZXQoJ3VzZXIuYWdlJywgNDQ0KTsgLy9zaG91bGQgZmFpbFxuICAgIHZpZXdtb2RlbC5zZXQoJ3VzZXIuYWRkcmVzcycsIDc3ODc4KTsgLy9zaG91bGQgZmFpbFxuICAgIHZpZXdtb2RlbC5zZXQoJ3VzZXIuYWRkcmVzcycsICdteSBzZWNvbmQgYWRkcmVzcycpOyAvL3Nob3VsZCBwYXNzXG5cbiAgICAvL3NldHMgZGF0YSBiaW5kaW5nXG4gICAgLy8gdGhpcy5iaW5kID0gdmlld21vZGVsLmdldCgpXG4gICAgLy8gdGhpcy5iaW5kLnVzZXIgPSB1c2VyLmdldCgpXG4gICAgdGhpcy5iaW5kaW5nLnJlZnJlc2godGhpcy5iaW5kKTtcbiAgfVxuXG4gIGV4YW1wbGVSb3V0ZXIoKSB7XG4gICAgLy8gY2hhbmdlIHN0YXRlIHRvIC9saXN0XG4gICAgLy8gcm91dGVyLmdvKCdob2Rvci8xMicsIHtteWRhdGE6MTIzNDU1NiwgbXlvYmo6e25hbWU6J3NoZXJsb2NrJ319KTtcbiAgICAvLyBzZXRUaW1lb3V0KCgpPT4gd2luZG93LnJvdXRlci5nbygnbGlzdCcpLDIwMDApXG4gIH1cbn1cbiIsImltcG9ydCBMaWFpc29uIGZyb20gJy4vTGlhaXNvbic7XG5pbXBvcnQgQmluZGluZyBmcm9tICcuL0JpbmRpbmcnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFeGFtcGxlMiB7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICB0aGlzLmJpbmQgPSBuZXcgTGlhaXNvbihkYXRhKTtcbiAgICBuZXcgQmluZGluZyh0aGlzLmJpbmQpO1xuICAgICAgLy8gdGhpcy5hbm90aGVyRnVuY3Rpb24oKVxuICB9XG5cbiAgYW5vdGhlckZ1bmN0aW9uKCkge1xuICAgIC8vIGhlcmUgeW91IGhhdmUgYWNjZXNzIHRvIHRoaXMuZGF0YS51c2VyIGFuZCB0aGlzLmRhdGEucHJvZ3JhbW1pbmdfbGFuZ3VhZ2VzXG4gICAgY29uc29sZS5sb2codGhpcy5iaW5kLnN0cmluZyk7XG4gIH1cbn1cbiIsIi8vIHB1dHMgcm91dGVzIG9uIHRoZSByb3V0ZXIgY2xhc3NcblxuaW1wb3J0IFJvdXRlciBmcm9tICcuL1JvdXRlcic7XG4vLyBUT0RPOiBub3QgYXR0YWNoIHRoaXMgdG8gdGhlIGdsb2JhbCBuYW1lc3BhY2VcbndpbmRvdy5yb3V0ZXIgPSB3aW5kb3cucm91dGVyIHx8IG5ldyBSb3V0ZXIoKTtcbnJvdXRlci5zdGF0ZSh7XG4gIG5hbWU6ICcvdXNlcnMnLFxuICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy91c2VyaW5kZXguaHRtbCdcbn0pLnN0YXRlKHtcbiAgbmFtZTogJy91c2VyLzppZCcsXG4gIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3VzZXIuaHRtbCdcbn0pLnN0YXRlKHtcbiAgbmFtZTogJy91c2VyLzppZC9kZXRhaWxzJyxcbiAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvdXNlcmRldGFpbHMuaHRtbCdcbn0pLnN0YXRlKHtcbiAgbmFtZTogJy91c2VyLzppZC86c3ViaWQnLFxuICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy91c2Vyc3ViLmh0bWwnXG59KS5zdGF0ZSh7XG4gIG5hbWU6ICcvbGlzdCcsXG4gIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL2xpc3QuaHRtbCdcbn0pLnN0YXRlKHtcbiAgbmFtZTogJy8nLFxuICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9saXN0Lmh0bWwnXG59KS5mYWxsYmFjayh7XG4gIG5hbWU6ICcvNDA0JyxcbiAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvNDA0Lmh0bWwnXG59KTtcbiIsImltcG9ydCBCYXNlTW9kZWwgZnJvbSAnLi9CYXNlTW9kZWwnXG5cbmV4cG9ydCBjbGFzcyBVc2VyTW9kZWwgZXh0ZW5kcyBCYXNlTW9kZWwge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigndXNlcicsIHtcbiAgICAgIGlkOiB7XG4gICAgICAgIHZhbHVlOiA3ODk3ODcsXG4gICAgICAgIHR5cGU6ICdudW1iZXInXG4gICAgICB9LFxuICAgICAgbmFtZToge1xuICAgICAgICB2YWx1ZTogJ25hbWUnLFxuICAgICAgICB0eXBlOiAnc3RyaW5nJ1xuICAgICAgfSxcbiAgICAgIGFkZHJlc3M6IHtcbiAgICAgICAgdmFsdWU6ICcyMjFiIGJha2UnLFxuICAgICAgICB0eXBlOiAnc3RyaW5nJ1xuICAgICAgfSxcbiAgICAgIGFnZToge1xuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgdHlwZTogJ251bWJlcidcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8vZXhhbXBsZSBtb2RlbCBoZWxwZXJcbiAgdXBDYXNlKHN0cikge1xuICAgIHJldHVybiBzdHIudG9VcHBlckNhc2UoKTtcbiAgfVxufVxuIiwiaW1wb3J0IEJhc2VNb2RlbCBmcm9tICcuL0Jhc2VNb2RlbCdcblxuZXhwb3J0IGNsYXNzIFZpZXdNb2RlbCBleHRlbmRzIEJhc2VNb2RlbCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCd2aWV3Jywge1xuICAgICAgc2luZ2xlOiB7XG4gICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICB2YWx1ZTogJ2Zyb20gc2NoZW1hJ1xuICAgICAgfSxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgICAgdmFsdWU6IDg4ODg4XG4gICAgICAgICAgfSxcbiAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgIHZhbHVlOiAnU2hlcmxvY2sgSG9sbWVzJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYWRkcmVzczoge1xuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICB2YWx1ZTogJzIyMWIgQmFrZXIgU3RyZWV0J1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBwcm9ncmFtbWluZ19sYW5ndWFnZXM6IHtcbiAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgdmFsdWU6IFsnamF2YXNjcmlwdCcsICdydWJ5J11cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
