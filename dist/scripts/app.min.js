"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function loadComponent(e,t){new window[e](t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),BaseModel=function(){function e(t,n){_classCallCheck(this,e),this.modelName=t,this.data=n}return _createClass(e,[{key:"set",value:function(e,t){var n=this.existsInSchema(this.data,e,t);if(!n)return void console.warn('Not setting "'+e+'" in '+this.modelName+' model to "'+t+'" because it doesnt exist in the schema');var a=this.checkType(this.data,e,t);return a?void this.setValue(this.data,e,t):void console.warn('Not setting "'+e+'" in '+this.modelName+' model to "'+t+'" because it it isnt the right type')}},{key:"get",value:function(e){return e?this.getValue(this.data,e):this.getData(this.data)}},{key:"existsInSchema",value:function(e,t,n){return t="string"==typeof t?t.split("."):t,t.length>1&&e[t[0]]?this.existsInSchema(e[t.shift()].value,t,n):e[t[0]]?!0:!1}},{key:"checkType",value:function(e,t,n){return t="string"==typeof t?t.split("."):t,t.length>1&&e[t[0]]?this.checkType(e[t.shift()].value,t,n):e[t[0]].type===typeof n}},{key:"getData",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];for(var n in e)"object"===e[n].type?(t[n]={},this.getData(e[n].value,t[n])):t[n]=e[n].value;return t}},{key:"setValue",value:function(e,t,n){t="string"==typeof t?t.split("."):t,t.length>1&&e[t[0]].value?this.setValue(e[t.shift()].value,t,n):e[t[0]].value&&(e[t[0]].value=n)}},{key:"getValue",value:function(e,t){return t="string"==typeof t?t.split("."):t,t.length>1&&e[t[0]]?this.getValue(e[t.shift()].value,t):e[t[0]].value||""}},{key:"checkStatus",value:function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}},{key:"parseJSON",value:function(e){return e.json()}},{key:"save",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.get("id"):arguments[0],t=this.endpointPrefix+"/"+this.modelName+"/"+e,n={};return n[this.modelName]=this.get(),console.log("make post xhr call to "+t,n),fetch(t,{method:"post",body:JSON.stringify(n)}).then(this.checkStatus).then(this.parseJSON)}},{key:"fetch",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=arguments.length<=0||void 0===arguments[0]?this.get("id"):arguments[0],t=this.endpointPrefix+"/"+this.modelName+"/"+e;return console.log("make get xhr call to "+t),fetch(t,{method:"get"}).then(this.checkStatus).then(this.parseJSON)})},{key:"update",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.get("id"):arguments[0],t=this.endpointPrefix+"/"+this.modelName+"/"+e,n={};n[this.modelName]=this.get(),console.log("make update xhr call to "+t,n)}},{key:"destroy",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.get("id"):arguments[0],t=this.endpointPrefix+"/"+this.modelName+"/"+e;return console.log("make delete xhr call to "+t),fetch(t,{method:"delete"}).then(this.checkStatus).then(this.parseJSON)}},{key:"endpointPrefix",set:function(e){this._endpointPrefix=e},get:function(){return this._endpointPrefix||"api/vi"}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();NodeList.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator];var Binding=function(){function e(t){var n=this;_classCallCheck(this,e),this.data=t,this.findBindable(),this.utils=new Utils;var a=a||{};setInterval(function(){n.utils.compare(a,n.data)===!1&&(a=JSON.parse(JSON.stringify(n.data)),n.populateBindings())},10)}return _createClass(e,[{key:"populateBindings",value:function(){var e=!0,t=!1,n=void 0;try{for(var a,r=document.querySelectorAll("[liaison-bind]")[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var i=a.value,o=document.activeElement.getAttribute("liaison-bind");i===document.activeElement||i.getAttribute("liaison-bind")!==o&&null!==o||this.setElementContent(i,this.getValue(this.data,i.getAttribute("liaison-bind")))}}catch(s){t=!0,n=s}finally{try{!e&&r["return"]&&r["return"]()}finally{if(t)throw n}}}},{key:"findBindable",value:function(){var e=this,t=!0,n=!1,a=void 0;try{for(var r,i=function(){var t=r.value;t.addEventListener("keydown",function(n){setTimeout(function(){return e.setValue(e.data,t.getAttribute("liaison-bind"),n.srcElement.value)})})},o=document.querySelectorAll("[liaison-bind]")[Symbol.iterator]();!(t=(r=o.next()).done);t=!0)i()}catch(s){n=!0,a=s}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw a}}}},{key:"setElementContent",value:function(e,t){void 0!==t&&(e.innerHTML=t,e.value=t)}},{key:"setValue",value:function(e,t,n){"string"==typeof t&&(t=t.split(".")),t.length>1&&e[t[0]]?this.setValue(e[t.shift()],t,n):"string"==typeof e[t[0]]&&(e[t[0]]=n)}},{key:"getValue",value:function(e,t){return"string"==typeof t&&(t=t.split(".")),t.length>1&&e[t[0]]?this.getValue(e[t.shift()],t):e[t[0]]}},{key:"refresh",value:function(e){this.data=e,this.populateBindings()}}]),e}(),Liaison=function e(t){_classCallCheck(this,e);var n=void 0;for(n in t)this[n]=t[n]},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Router=function(){function e(){var t=this;_classCallCheck(this,e),this.utils=new Utils,this.view=document.querySelector("[liaison-view]"),this.paths=[],this.wildcards=[],setTimeout(function(){return t.go(window.location.hash.substring(1))},0),window.addEventListener("popstate",function(e){return t.go(e.state||window.location.hash.substring(1),!1)})}return _createClass(e,[{key:"state",value:function(e){return e.name.indexOf(":")>0?this.wildcards.push(e):this.paths.push(e),this}},{key:"fallback",value:function(e){this.paths.push(e),this._fallback=e}},{key:"go",value:function(e){var t=this;console.log("going to state "+e);var n=this.findRouteInPaths(e);return n?void fetch(n.templateUrl).then(function(e){return e.text()}).then(function(e){t.view.innerHTML=e}):(this.go(this._fallback.name),!1)}},{key:"findRouteInPaths",value:function(e){var t=!0,n=!1,a=void 0;try{for(var r,i=this.paths[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;if(o.name===e)return o}}catch(s){n=!0,a=s}finally{try{!t&&i["return"]&&i["return"]()}finally{if(n)throw a}}e=e.substring(1).split("/");var l=!0,u=!1,c=void 0;try{for(var h,f=this.wildcards[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var d=h.value,p=d.name.substring(1).split("/");if(p.length===e.length)for(var v=0,y=p.length;y>v;v++)if(0===p[v].indexOf(":")){var g=p;if(g[v]=e[v],this.utils.compare(g,e))return d}}}catch(s){u=!0,c=s}finally{try{!l&&f["return"]&&f["return"]()}finally{if(u)throw c}}return!1}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Utils=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"hasher",value:function(e){var t=0,n=void 0,a=void 0,r=e.toString();for(n=0,a=r.length;a>n;n++)t=(t<<5)-t+r.charCodeAt(n)&4294967295;return t}},{key:"object",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];for(var a in t){if("object"==typeof t[a])return this.object(e,t[a],n);hasOwnProperty.call(t,a)&&(n+=e.hasher(a+e.hasher(t[a])))}return n}},{key:"hash",value:function(e){var t={string:this.hasher,number:this.hasher,"boolean":this.hasher,object:this.object},n=typeof e;return null!=e&&t[n]?t[n](this,e)+this.hasher(n):0}},{key:"compareHashes",value:function(e,t){return this.hash(e)===this.hash(t)}},{key:"compare",value:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Example=function(){function e(t){_classCallCheck(this,e),this.bind=new Liaison(t),console.log(this.bind),this.binding=new Binding(this.bind),this.exampleBinding(),this.exampleRouter()}return _createClass(e,[{key:"exampleBinding",value:function(){var e=new UserModel;e.set("age","8777"),e.set("name","my first name on user model"),e.set("age",{age:33}),e.set("age",999),e.set("address","my address"),e.set("address",e.upCase("my second address")),e.save().then(function(){console.log("then")})["catch"](function(e){console.log("request failed",e)}),e.update(),e.fetch().then(function(){console.log("then")})["catch"](function(e){console.log("request failed",e)}),e.destroy().then(function(){console.log("then")})["catch"](function(e){console.log("request failed",e)});var t=new ViewModel;t.set("single","updated via viewmodel model set function"),t.set("user.name","my second example name"),t.set("user.age",{age:22}),t.set("user.age",444),t.set("user.address",77878),t.set("user.address","my second address"),this.binding.refresh(this.bind)}},{key:"exampleRouter",value:function(){}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Example2=function(){function e(t){_classCallCheck(this,e),this.bind=new Liaison(t),new Binding(this.bind)}return _createClass(e,[{key:"anotherFunction",value:function(){console.log(this.bind.string)}}]),e}();window.router=window.router||new Router,router.state({name:"/users",templateUrl:"templates/userindex.html"}).state({name:"/user/:id",templateUrl:"templates/user.html"}).state({name:"/user/:id/details",templateUrl:"templates/userdetails.html"}).state({name:"/user/:id/:subid",templateUrl:"templates/usersub.html"}).state({name:"/list",templateUrl:"templates/list.html"}).state({name:"/",templateUrl:"templates/list.html"}).fallback({name:"/404",templateUrl:"templates/404.html"});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_get=function(e,t,n){for(var a=!0;a;){var r=e,i=t,o=n;s=u=l=void 0,a=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;e=u,t=i,n=o,a=!0}},UserModel=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"user",{id:{value:789787,type:"number"},name:{value:"name",type:"string"},address:{value:"221b bake",type:"string"},age:{value:null,type:"number"}})}return _inherits(t,e),_createClass(t,[{key:"upCase",value:function(e){return e.toUpperCase()}}]),t}(BaseModel),_get=function(e,t,n){for(var a=!0;a;){var r=e,i=t,o=n;s=u=l=void 0,a=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;e=u,t=i,n=o,a=!0}},ViewModel=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"view",{single:{type:"string",value:"from schema"},user:{type:"object",value:{id:{type:"number",value:88888},name:{type:"string",value:"Sherlock Holmes"},address:{type:"string",value:"221b Baker Street"}}},programming_languages:{type:"array",value:["javascript","ruby"]}})}return _inherits(t,e),t}(BaseModel);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5taW4uanMiLCJMaWFpc29uLmpzIiwiQmFzZU1vZGVsLmpzIiwiQmluZGluZy5qcyIsIlJvdXRlci5qcyIsIlV0aWxzLmpzIiwic2NyaXB0cy9FeGFtcGxlLmpzIiwic2NyaXB0cy9FeGFtcGxlMi5qcyIsInNjcmlwdHMvUm91dGVzLmpzIiwic2NyaXB0cy9Vc2VyTW9kZWwuanMiLCJzY3JpcHRzL1ZpZXdNb2RlbC5qcyJdLCJuYW1lcyI6WyJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwibG9hZENvbXBvbmVudCIsIm1vZHVsZSIsImRhdGEiLCJ3aW5kb3ciLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJwcm90b3R5cGUiLCJPYmplY3QiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsInZhbHVlIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiQmFzZU1vZGVsIiwibW9kZWxOYW1lIiwic2NoZW1hIiwidGhpcyIsImV4aXN0c0luU2NoZW1hIiwiY29uc29sZSIsIndhcm4iLCJ0eXBlTWF0Y2hlcyIsImNoZWNrVHlwZSIsInNldFZhbHVlIiwiYWNjZXNzIiwiZ2V0VmFsdWUiLCJnZXREYXRhIiwib2JqIiwic3BsaXQiLCJzaGlmdCIsInR5cGUiLCJuZXdPYmoiLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJlbGVtZW50IiwicmVzcG9uc2UiLCJzdGF0dXMiLCJlcnJvciIsIkVycm9yIiwic3RhdHVzVGV4dCIsImpzb24iLCJpZCIsImdldCIsInVybCIsImVuZHBvaW50UHJlZml4Iiwic2VuZE9iaiIsImxvZyIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0aGVuIiwiY2hlY2tTdGF0dXMiLCJwYXJzZUpTT04iLCJfZmV0Y2giLCJhcHBseSIsInRvU3RyaW5nIiwic2V0IiwicHJlZml4IiwiX2VuZHBvaW50UHJlZml4IiwiTm9kZUxpc3QiLCJTeW1ib2wiLCJpdGVyYXRvciIsIkFycmF5IiwiQmluZGluZyIsIl90aGlzIiwiZmluZEJpbmRhYmxlIiwidXRpbHMiLCJVdGlscyIsImN1cnJlbnREYXRhIiwic2V0SW50ZXJ2YWwiLCJjb21wYXJlIiwicGFyc2UiLCJwb3B1bGF0ZUJpbmRpbmdzIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiIsIl9kaWRJdGVyYXRvckVycm9yIiwiX2l0ZXJhdG9yRXJyb3IiLCJfc3RlcCIsIl9pdGVyYXRvciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsIm5leHQiLCJkb25lIiwiZWxtIiwiYmluZE5hbWUiLCJhY3RpdmVFbGVtZW50IiwiZ2V0QXR0cmlidXRlIiwic2V0RWxlbWVudENvbnRlbnQiLCJlcnIiLCJfdGhpczIiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiIsIl9kaWRJdGVyYXRvckVycm9yMiIsIl9pdGVyYXRvckVycm9yMiIsIl9zdGVwMiIsIl9sb29wIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJzZXRUaW1lb3V0Iiwic3JjRWxlbWVudCIsIl9pdGVyYXRvcjIiLCJpbm5lckhUTUwiLCJMaWFpc29uIiwiZGF0dW0iLCJSb3V0ZXIiLCJ2aWV3IiwicXVlcnlTZWxlY3RvciIsInBhdGhzIiwid2lsZGNhcmRzIiwiZ28iLCJsb2NhdGlvbiIsImhhc2giLCJzdWJzdHJpbmciLCJldmVudCIsInN0YXRlIiwibmFtZSIsImluZGV4T2YiLCJwdXNoIiwiX2ZhbGxiYWNrIiwicm91dGUiLCJmaW5kUm91dGVJblBhdGhzIiwidGVtcGxhdGVVcmwiLCJ0ZXh0IiwidGVtcGxhdGUiLCJwYXRoIiwid2lsZGNhcmQiLCJfd2lsZGNhcmQiLCJsIiwidGVtcCIsInZhbCIsInN0cmluZyIsImNoYXJDb2RlQXQiLCJzZWxmIiwicmVzdWx0IiwicHJvcGVydHkiLCJvYmplY3QiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJoYXNoZXIiLCJpbnB1dCIsInR5cGVzIiwibnVtYmVyIiwiYm9vbGVhbiIsImEiLCJiIiwiRXhhbXBsZSIsImJpbmQiLCJiaW5kaW5nIiwiZXhhbXBsZUJpbmRpbmciLCJleGFtcGxlUm91dGVyIiwidXNlciIsIlVzZXJNb2RlbCIsImFnZSIsInVwQ2FzZSIsInNhdmUiLCJ1cGRhdGUiLCJkZXN0cm95Iiwidmlld21vZGVsIiwiVmlld01vZGVsIiwicmVmcmVzaCIsIkV4YW1wbGUyIiwicm91dGVyIiwiZmFsbGJhY2siLCJfZ2V0IiwiX3giLCJfeDIiLCJfeDMiLCJfYWdhaW4iLCJyZWNlaXZlciIsImRlc2MiLCJwYXJlbnQiLCJnZXR0ZXIiLCJGdW5jdGlvbiIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImdldFByb3RvdHlwZU9mIiwiX0Jhc2VNb2RlbCIsImFkZHJlc3MiLCJzdHIiLCJ0b1VwcGVyQ2FzZSIsInNpbmdsZSIsInByb2dyYW1taW5nX2xhbmd1YWdlcyJdLCJtYXBwaW5ncyI6IkFBQ0EsWUFJQSxTQUFTQSxpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FnTWhILFFBQVNILGlCQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQThJaEgsUUFBU0gsaUJBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNDMVVqRyxRQUFTQyxlQUFjQyxFQUFRQyxHQUM1QyxHQUFJQyxRQUFPRixHQUFRQyxHRDJWckIsUUFBU04saUJBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNB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bkwsVUFBVyxJQUFJZ0wsR0FBTy9LLE9BQU9tTCx5QkFBeUJ0QyxFQUFRRCxFQUFXLElBQWFyRyxTQUFUd0ksRUFBSixDQUFpTixHQUFJLFNBQVdBLEdBQVEsTUFBT0EsR0FBSzVLLEtBQWdCLElBQUk4SyxHQUFTRixFQUFLL0gsR0FBSyxPQUFlVCxVQUFYMEksRUFBK0IxSSxPQUFvQjBJLEVBQU9sQyxLQUFLK0IsR0FBcFUsR0FBSUUsR0FBU2hMLE9BQU9vTCxlQUFldkMsRUFBUyxJQUFlLE9BQVhtQyxFQUFtQixNQUFPekksT0FBb0JtSSxHQUFLTSxFQUFRTCxFQUFNL0IsRUFBVWdDLEVBQU1FLEVBQVVELEdBQVMsSVV6dUI3Y1QsVUFBUyxTQUFBaUIsR0FDVCxRQURBakIsS1ZtdkJUaEwsZ0JBQWdCbUMsS1VudkJQNkksR0FFVEssS0FBQXpLLE9BQUFvTCxlQUZTaEIsRUFBU3JLLFdBQUEsY0FBQXdCLE1BQUF3SCxLQUFBeEgsS0FFWixRQUNKa0ssUUFDRXJKLEtBQU0sU0FDTmpDLE1BQU8sZUFFVHlKLE1BQ0V4SCxLQUFNLFNBQ05qQyxPQUNFNEMsSUFDRVgsS0FBTSxTQUNOakMsTUFBTyxPQUVUc0gsTUFDRXJGLEtBQU0sU0FDTmpDLE1BQU8sbUJBRVRtTCxTQUNFbEosS0FBTSxTQUNOakMsTUFBTyx1QkFJYnVMLHVCQUNFdEosS0FBTSxRQUNOakMsT0FBUSxhQUFjLFdWd3ZCNUIsTUFsQ0FQLFdVaHZCV3dLLEVBQVNpQixHQUFUakIsR0FBa0JoSiIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOltudWxsLCIndXNlIHN0cmljdCc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaWFpc29uIHtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIGxldCBkYXR1bTtcbiAgICBmb3IgKGRhdHVtIGluIGRhdGEpIHtcbiAgICAgIHRoaXNbZGF0dW1dID0gZGF0YVtkYXR1bV07XG4gICAgfVxuICB9XG59XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBsb2FkQ29tcG9uZW50KG1vZHVsZSwgZGF0YSkge1xuICBuZXcgd2luZG93W21vZHVsZV0oZGF0YSk7XG59XG4iLCIvLyBUT0RPOiBhbGxvdyBhIHNoYXJlZCBmcm9udGVuZC9iYWNrZW5kIHNjaGVtYSBmaWxlXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNlTW9kZWwge1xuICBjb25zdHJ1Y3Rvcihtb2RlbE5hbWUsIHNjaGVtYSkge1xuICAgIHRoaXMubW9kZWxOYW1lID0gbW9kZWxOYW1lO1xuICAgIHRoaXMuZGF0YSA9IHNjaGVtYTtcbiAgfVxuXG4gIHNldChrZXksIHZhbHVlKSB7XG4gICAgbGV0IGV4aXN0c0luU2NoZW1hID0gdGhpcy5leGlzdHNJblNjaGVtYSh0aGlzLmRhdGEsIGtleSwgdmFsdWUpO1xuICAgIGlmICghZXhpc3RzSW5TY2hlbWEpIHtcbiAgICAgIGNvbnNvbGUud2FybihgTm90IHNldHRpbmcgXCIke2tleX1cIiBpbiAke3RoaXMubW9kZWxOYW1lfSBtb2RlbCB0byBcIiR7dmFsdWV9XCIgYmVjYXVzZSBpdCBkb2VzbnQgZXhpc3QgaW4gdGhlIHNjaGVtYWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgdHlwZU1hdGNoZXMgPSB0aGlzLmNoZWNrVHlwZSh0aGlzLmRhdGEsIGtleSwgdmFsdWUpO1xuICAgIGlmICghdHlwZU1hdGNoZXMpIHtcbiAgICAgIGNvbnNvbGUud2FybihgTm90IHNldHRpbmcgXCIke2tleX1cIiBpbiAke3RoaXMubW9kZWxOYW1lfSBtb2RlbCB0byBcIiR7dmFsdWV9XCIgYmVjYXVzZSBpdCBpdCBpc250IHRoZSByaWdodCB0eXBlYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc2V0VmFsdWUodGhpcy5kYXRhLCBrZXksIHZhbHVlKTtcbiAgfVxuXG4gIGdldChhY2Nlc3MpIHtcbiAgICBpZiAoYWNjZXNzKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRWYWx1ZSh0aGlzLmRhdGEsIGFjY2Vzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmdldERhdGEodGhpcy5kYXRhKTtcbiAgICB9XG4gIH1cblxuICBleGlzdHNJblNjaGVtYShvYmosIGFjY2VzcywgdmFsdWUpIHtcbiAgICBhY2Nlc3MgPSAodHlwZW9mKGFjY2VzcykgPT09ICdzdHJpbmcnKSA/IGFjY2Vzcy5zcGxpdCgnLicpIDogYWNjZXNzO1xuICAgIGlmIChhY2Nlc3MubGVuZ3RoID4gMSAmJiBvYmpbYWNjZXNzWzBdXSkge1xuICAgICAgcmV0dXJuIHRoaXMuZXhpc3RzSW5TY2hlbWEob2JqW2FjY2Vzcy5zaGlmdCgpXS52YWx1ZSwgYWNjZXNzLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvYmpbYWNjZXNzWzBdXSA/IHRydWUgOiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBjaGVja1R5cGUob2JqLCBhY2Nlc3MsIHZhbHVlKSB7XG4gICAgYWNjZXNzID0gKHR5cGVvZihhY2Nlc3MpID09ICdzdHJpbmcnKSA/IGFjY2Vzcy5zcGxpdCgnLicpIDogYWNjZXNzO1xuICAgIGlmIChhY2Nlc3MubGVuZ3RoID4gMSAmJiBvYmpbYWNjZXNzWzBdXSkge1xuICAgICAgcmV0dXJuIHRoaXMuY2hlY2tUeXBlKG9ialthY2Nlc3Muc2hpZnQoKV0udmFsdWUsIGFjY2VzcywgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb2JqW2FjY2Vzc1swXV0udHlwZSA9PT0gdHlwZW9mIHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIGdldERhdGEob2JqLCBuZXdPYmogPSB7fSkge1xuICAgIGZvciAobGV0IGVsZW1lbnQgaW4gb2JqKSB7XG4gICAgICBpZiAob2JqW2VsZW1lbnRdLnR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIG5ld09ialtlbGVtZW50XSA9IHt9O1xuICAgICAgICB0aGlzLmdldERhdGEob2JqW2VsZW1lbnRdLnZhbHVlLCBuZXdPYmpbZWxlbWVudF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3T2JqW2VsZW1lbnRdID0gb2JqW2VsZW1lbnRdLnZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3T2JqO1xuICB9XG5cbiAgc2V0VmFsdWUob2JqLCBhY2Nlc3MsIHZhbHVlKSB7XG4gICAgYWNjZXNzID0gKHR5cGVvZihhY2Nlc3MpID09ICdzdHJpbmcnKSA/IGFjY2Vzcy5zcGxpdCgnLicpIDogYWNjZXNzO1xuICAgIGlmIChhY2Nlc3MubGVuZ3RoID4gMSAmJiBvYmpbYWNjZXNzWzBdXS52YWx1ZSkge1xuICAgICAgdGhpcy5zZXRWYWx1ZShvYmpbYWNjZXNzLnNoaWZ0KCldLnZhbHVlLCBhY2Nlc3MsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKG9ialthY2Nlc3NbMF1dLnZhbHVlKSB7XG4gICAgICBvYmpbYWNjZXNzWzBdXS52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIGdldFZhbHVlKG9iaiwgYWNjZXNzKSB7XG4gICAgYWNjZXNzID0gKHR5cGVvZihhY2Nlc3MpID09ICdzdHJpbmcnKSA/IGFjY2Vzcy5zcGxpdCgnLicpIDogYWNjZXNzO1xuICAgIGlmIChhY2Nlc3MubGVuZ3RoID4gMSAmJiBvYmpbYWNjZXNzWzBdXSkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWUob2JqW2FjY2Vzcy5zaGlmdCgpXS52YWx1ZSwgYWNjZXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG9ialthY2Nlc3NbMF1dLnZhbHVlIHx8ICcnO1xuICAgIH1cbiAgfVxuXG4gIHNldCBlbmRwb2ludFByZWZpeChwcmVmaXgpIHtcbiAgICB0aGlzLl9lbmRwb2ludFByZWZpeCA9IHByZWZpeDtcbiAgfVxuXG4gIGdldCBlbmRwb2ludFByZWZpeCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZW5kcG9pbnRQcmVmaXggfHwgJ2FwaS92aSc7XG4gIH1cblxuICAvLyBUT0RPOiByZWZhY3RvciB0aGlzIHRvIGhlbHBlclxuICBjaGVja1N0YXR1cyhyZXNwb25zZSkge1xuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1cyA8IDMwMCkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IocmVzcG9uc2Uuc3RhdHVzVGV4dClcbiAgICAgIGVycm9yLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBwYXJzZUpTT04ocmVzcG9uc2UpIHtcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICB9XG5cbiAgLy8gVE9ETzogQ1JVRCBvcGVyYXRpb25zIHhociBjYWxscy4gcmV0dXJuIHByb21pc2VzXG4gIHNhdmUoaWQgPSB0aGlzLmdldCgnaWQnKSkge1xuICAgIGxldCB1cmwgPSBgJHt0aGlzLmVuZHBvaW50UHJlZml4fS8ke3RoaXMubW9kZWxOYW1lfS8ke2lkfWA7XG4gICAgbGV0IHNlbmRPYmogPSB7fTtcbiAgICBzZW5kT2JqW3RoaXMubW9kZWxOYW1lXSA9IHRoaXMuZ2V0KCk7XG4gICAgY29uc29sZS5sb2coYG1ha2UgcG9zdCB4aHIgY2FsbCB0byAke3VybH1gLCBzZW5kT2JqKTtcblxuICAgIHJldHVybiBmZXRjaCh1cmwsIHtcbiAgICAgICAgbWV0aG9kOiAncG9zdCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHNlbmRPYmopXG4gICAgICB9KS50aGVuKHRoaXMuY2hlY2tTdGF0dXMpXG4gICAgICAudGhlbih0aGlzLnBhcnNlSlNPTik7XG4gIH1cblxuICBmZXRjaChpZCA9IHRoaXMuZ2V0KCdpZCcpKSB7XG4gICAgbGV0IHVybCA9IGAke3RoaXMuZW5kcG9pbnRQcmVmaXh9LyR7dGhpcy5tb2RlbE5hbWV9LyR7aWR9YDtcbiAgICBjb25zb2xlLmxvZyhgbWFrZSBnZXQgeGhyIGNhbGwgdG8gJHt1cmx9YCk7XG5cbiAgICByZXR1cm4gZmV0Y2godXJsLCB7XG4gICAgICAgIG1ldGhvZDogJ2dldCdcbiAgICAgIH0pLnRoZW4odGhpcy5jaGVja1N0YXR1cylcbiAgICAgIC50aGVuKHRoaXMucGFyc2VKU09OKTtcbiAgfVxuXG4gIHVwZGF0ZShpZCA9IHRoaXMuZ2V0KCdpZCcpKSB7XG4gICAgbGV0IHVybCA9IGAke3RoaXMuZW5kcG9pbnRQcmVmaXh9LyR7dGhpcy5tb2RlbE5hbWV9LyR7aWR9YDtcbiAgICBsZXQgc2VuZE9iaiA9IHt9O1xuICAgIHNlbmRPYmpbdGhpcy5tb2RlbE5hbWVdID0gdGhpcy5nZXQoKTtcbiAgICBjb25zb2xlLmxvZyhgbWFrZSB1cGRhdGUgeGhyIGNhbGwgdG8gJHt1cmx9YCwgc2VuZE9iaik7XG5cbiAgICAvLyBHaXRodWIncyBmZXRjaCBwcm9qZWN0IGRvZXNudCBhcHBlYXIgdG8gc3VwcG9ydCBVUERBVEVcbiAgICAvLyBUT0RPOiBpbnZlc3RpZ2F0ZSB0aGUgYWJvdmUgc3RhdGVtZW50XG4gICAgLy8gZmV0Y2godXJsLCB7XG4gICAgLy8gICBtZXRob2Q6ICdVUERBVEUnLFxuICAgIC8vICAgYm9keTogSlNPTi5zdHJpbmdpZnkoc2VuZE9iailcbiAgICAvLyB9KTtcbiAgfVxuXG4gIGRlc3Ryb3koaWQgPSB0aGlzLmdldCgnaWQnKSkge1xuICAgIGxldCB1cmwgPSBgJHt0aGlzLmVuZHBvaW50UHJlZml4fS8ke3RoaXMubW9kZWxOYW1lfS8ke2lkfWA7XG4gICAgY29uc29sZS5sb2coYG1ha2UgZGVsZXRlIHhociBjYWxsIHRvICR7dXJsfWApO1xuXG4gICAgcmV0dXJuIGZldGNoKHVybCwge1xuICAgICAgICBtZXRob2Q6ICdkZWxldGUnXG4gICAgICB9KS50aGVuKHRoaXMuY2hlY2tTdGF0dXMpXG4gICAgICAudGhlbih0aGlzLnBhcnNlSlNPTik7XG4gIH1cbn1cbiIsIid1c2Ugc3RyaWN0Jztcbi8vYWxsb3dpbmcgZm9yLi5vZiBvZiBub2RlbGlzdHMgZm9yIENocm9tZSBzdXBwb3J0XG5Ob2RlTGlzdC5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IEFycmF5LnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdO1xuaW1wb3J0IHtVdGlsc30gZnJvbSAnLi9VdGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpbmRpbmcge1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB0aGlzLmZpbmRCaW5kYWJsZSgpO1xuICAgIHRoaXMudXRpbHMgPSBuZXcgVXRpbHMoKTtcblxuICAgIGxldCBjdXJyZW50RGF0YSA9IGN1cnJlbnREYXRhIHx8IHt9O1xuXG4gICAgLy8gd2F0Y2hpbmcgdGhpcy5kYXRhIGZvciBwcm9ncmFtbWF0aWNhbCB1cGRhdGVzXG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMudXRpbHMuY29tcGFyZShjdXJyZW50RGF0YSwgdGhpcy5kYXRhKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgY3VycmVudERhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZGF0YSkpO1xuICAgICAgICB0aGlzLnBvcHVsYXRlQmluZGluZ3MoKTtcbiAgICAgIH1cbiAgICB9LCAxMCk7XG4gIH1cblxuICBwb3B1bGF0ZUJpbmRpbmdzKCkge1xuICAgIGZvciAobGV0IGVsbSBvZiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbbGlhaXNvbi1iaW5kXScpKSB7XG4gICAgICBsZXQgYmluZE5hbWUgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmdldEF0dHJpYnV0ZSgnbGlhaXNvbi1iaW5kJyk7XG5cbiAgICAgIC8vcHJldmVudCB0aGUgaW5wdXQgeW91cmUgdHlwaW5nIGluIGZyb20gdXBkYXRpbmcuIHByZXZlbnRzIHRoZSBjdXJzb3IgZnJvbSBqdW1waW5nIHRvIHRoZSBlbmRcbiAgICAgIC8vb25seSB1cGRhdGVzIGJpbmRpbmdzIHRoYXQgbmVlZCB0byBiZSB1cGRhdGVkXG4gICAgICBpZiAoZWxtICE9PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmIChlbG0uZ2V0QXR0cmlidXRlKCdsaWFpc29uLWJpbmQnKSA9PT0gYmluZE5hbWUgfHwgYmluZE5hbWUgPT09IG51bGwpKSB7XG4gICAgICAgIHRoaXMuc2V0RWxlbWVudENvbnRlbnQoZWxtLCB0aGlzLmdldFZhbHVlKHRoaXMuZGF0YSwgZWxtLmdldEF0dHJpYnV0ZSgnbGlhaXNvbi1iaW5kJykpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmaW5kQmluZGFibGUoKSB7XG4gICAgZm9yIChsZXQgZWxtIG9mIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tsaWFpc29uLWJpbmRdJykpIHtcbiAgICAgIGVsbS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgICAgLy9zZXR0aW1lb3V0IGFsbG93cyB0aGUga2V5ZG93biBldmVudCBnbyBnZXQgdGhlIG5ldyB2YWx1ZVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2V0VmFsdWUodGhpcy5kYXRhLCBlbG0uZ2V0QXR0cmlidXRlKCdsaWFpc29uLWJpbmQnKSwgZS5zcmNFbGVtZW50LnZhbHVlKSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBzZXRFbGVtZW50Q29udGVudChlbGVtZW50LCB2YWx1ZSkge1xuICAgIC8vIGFsbG93cyBtdWx0aXBsZSBjb21wb25lbnRzXG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICBlbGVtZW50LmlubmVySFRNTCA9IHZhbHVlO1xuICAgIGVsZW1lbnQudmFsdWUgPSB2YWx1ZTtcbiAgfVxuXG4gIHNldFZhbHVlKG9iaiwgYWNjZXNzLCB2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YoYWNjZXNzKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGFjY2VzcyA9IGFjY2Vzcy5zcGxpdCgnLicpO1xuICAgIH1cbiAgICBpZiAoYWNjZXNzLmxlbmd0aCA+IDEgJiYgb2JqW2FjY2Vzc1swXV0pIHtcbiAgICAgIHRoaXMuc2V0VmFsdWUob2JqW2FjY2Vzcy5zaGlmdCgpXSwgYWNjZXNzLCB2YWx1ZSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqW2FjY2Vzc1swXV0gPT09ICdzdHJpbmcnKSB7XG4gICAgICBvYmpbYWNjZXNzWzBdXSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIGdldFZhbHVlKG9iaiwgYWNjZXNzKSB7XG4gICAgaWYgKHR5cGVvZihhY2Nlc3MpID09PSAnc3RyaW5nJykge1xuICAgICAgYWNjZXNzID0gYWNjZXNzLnNwbGl0KCcuJyk7XG4gICAgfVxuICAgIGlmIChhY2Nlc3MubGVuZ3RoID4gMSAmJiBvYmpbYWNjZXNzWzBdXSkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWUob2JqW2FjY2Vzcy5zaGlmdCgpXSwgYWNjZXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG9ialthY2Nlc3NbMF1dO1xuICAgIH1cbiAgfVxuXG4gIHJlZnJlc2goZGF0YSkge1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5wb3B1bGF0ZUJpbmRpbmdzKCk7XG4gIH1cbn1cbiIsIid1c2Ugc3RyaWN0JztcbmltcG9ydCB7VXRpbHN9IGZyb20gJy4vVXRpbHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSb3V0ZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnV0aWxzID0gbmV3IFV0aWxzKCk7XG4gICAgdGhpcy52aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2xpYWlzb24tdmlld10nKTtcbiAgICB0aGlzLnBhdGhzID0gW107XG4gICAgdGhpcy53aWxkY2FyZHMgPSBbXTtcbiAgICAvL2dvZXMgdG8gaGFzaCB1cmxcbiAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuZ28od2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpKSwgMCk7XG4gICAgLy9hbGxvd3MgYmFjay9mb3J3YXJkIGJ1dHRvbnNcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCAoZXZlbnQpID0+IHRoaXMuZ28oZXZlbnQuc3RhdGUgfHwgd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpLCBmYWxzZSkpO1xuICB9XG5cbiAgc3RhdGUoZGF0YSkge1xuICAgIGlmIChkYXRhLm5hbWUuaW5kZXhPZignOicpID4gMCkge1xuICAgICAgdGhpcy53aWxkY2FyZHMucHVzaChkYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wYXRocy5wdXNoKGRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGZhbGxiYWNrKGRhdGEpIHtcbiAgICB0aGlzLnBhdGhzLnB1c2goZGF0YSk7XG4gICAgdGhpcy5fZmFsbGJhY2sgPSBkYXRhO1xuICB9XG5cbiAgLy8gaW50ZWdyYXRpb24gdGVzdHMgY292ZXIgdGhpc1xuICBnbyhyb3V0ZSkge1xuICAgIGNvbnNvbGUubG9nKGBnb2luZyB0byBzdGF0ZSAke3JvdXRlfWApO1xuICAgIGxldCBvYmogPSB0aGlzLmZpbmRSb3V0ZUluUGF0aHMocm91dGUpO1xuICAgIGlmICghb2JqKSB7XG4gICAgICB0aGlzLmdvKHRoaXMuX2ZhbGxiYWNrLm5hbWUpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmZXRjaChvYmoudGVtcGxhdGVVcmwpXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTtcbiAgICAgIH0pLnRoZW4oKHRlbXBsYXRlKSA9PiB7XG4gICAgICAgIHRoaXMudmlldy5pbm5lckhUTUwgPSB0ZW1wbGF0ZTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLy8gVE9ETzogY2xlYW4gdGhpcyB1cC4gdGhlcmUgaGFzIHRvIGJlIGEgYmV0dGVyIHdheVxuICBmaW5kUm91dGVJblBhdGhzKHJvdXRlKSB7XG4gICAgZm9yIChsZXQgcGF0aCBvZiB0aGlzLnBhdGhzKSB7XG4gICAgICBpZiAocGF0aC5uYW1lID09PSByb3V0ZSkgcmV0dXJuIHBhdGg7XG4gICAgfVxuICAgIHJvdXRlID0gcm91dGUuc3Vic3RyaW5nKDEpLnNwbGl0KCcvJyk7XG4gICAgZm9yIChsZXQgd2lsZGNhcmQgb2YgdGhpcy53aWxkY2FyZHMpIHtcbiAgICAgIGxldCBfd2lsZGNhcmQgPSB3aWxkY2FyZC5uYW1lLnN1YnN0cmluZygxKS5zcGxpdCgnLycpO1xuICAgICAgaWYgKF93aWxkY2FyZC5sZW5ndGggPT09IHJvdXRlLmxlbmd0aCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IF93aWxkY2FyZC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICBpZiAoX3dpbGRjYXJkW2ldLmluZGV4T2YoJzonKSA9PT0gMCkge1xuICAgICAgICAgICAgbGV0IHRlbXAgPSBfd2lsZGNhcmQ7XG4gICAgICAgICAgICB0ZW1wW2ldID0gcm91dGVbaV07XG4gICAgICAgICAgICBpZiAodGhpcy51dGlscy5jb21wYXJlKHRlbXAsIHJvdXRlKSkge1xuICAgICAgICAgICAgICByZXR1cm4gd2lsZGNhcmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5cblxuLy8gKiBvbiBwYWdlIGxvYWQsIGdldCB1cmwgYW5kIGxvYWQgYXBwcm9wcmlhdGUgdGVtdHBsYXRlXG4vLyAqIG9uIHVybCBjaGFuZ2UsIHVwZGF0ZSB0ZW1wbGF0ZVxuLy8gKiBhbGxvdyB3aWxkY2FyZHMgaW4gcGF0aHMgL3RlbXBsYXRlL3VzZXIvOmlkXG4vLyBwYXNzIHZhcmlhYmxlcyB0byB0ZW1wbGF0ZVxuLy8gYWxsb3cgY29tcG9uZW50IHRvIGJlIGRlY2xhcmVkIGluIHJvdXRlIG9iamVjdFxuLy8gKiBnZXQgc3RhdGUgKGlmIHN0YXRlID09ICdodWhvaG9oYW8nKS4uLlxuLy8gKiB1cGRhdGUgc3RhdGUgb24gZm9yd2FyZC9iYWNrXG4vLyAqIHJvdXRlcyBvbiByZWZyZXNoXG4iLCIndXNlIHN0cmljdCc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVdGlscyB7XG4gIGNvbnN0cnVjdG9yKCkge31cblxuICBoYXNoZXIodmFsKSB7XG4gICAgbGV0IGhhc2ggPSAwLFxuICAgICAgaSxcbiAgICAgIGwsXG4gICAgICBzdHJpbmcgPSB2YWwudG9TdHJpbmcoKTtcbiAgICBmb3IgKGkgPSAwLCBsID0gc3RyaW5nLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgaGFzaCA9ICgoKGhhc2ggPDwgNSkgLSBoYXNoKSArIHN0cmluZy5jaGFyQ29kZUF0KGkpKSAmIDB4RkZGRkZGRkY7XG4gICAgfVxuICAgIHJldHVybiBoYXNoO1xuICB9XG5cbiAgb2JqZWN0KHNlbGYsIG9iaiwgcmVzdWx0ID0gMCkge1xuICAgIGZvciAobGV0IHByb3BlcnR5IGluIG9iaikge1xuICAgICAgaWYgKHR5cGVvZiBvYmpbcHJvcGVydHldID09PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gdGhpcy5vYmplY3Qoc2VsZiwgb2JqW3Byb3BlcnR5XSwgcmVzdWx0KTtcbiAgICAgIH1cbiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcGVydHkpKSB7XG4gICAgICAgIHJlc3VsdCArPSBzZWxmLmhhc2hlcihwcm9wZXJ0eSArIHNlbGYuaGFzaGVyKG9ialtwcm9wZXJ0eV0pKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGhhc2goaW5wdXQpIHtcbiAgICBsZXQgdHlwZXMgPSB7XG4gICAgICAnc3RyaW5nJzogdGhpcy5oYXNoZXIsXG4gICAgICAnbnVtYmVyJzogdGhpcy5oYXNoZXIsXG4gICAgICAnYm9vbGVhbic6IHRoaXMuaGFzaGVyLFxuICAgICAgJ29iamVjdCc6IHRoaXMub2JqZWN0XG4gICAgfTtcbiAgICBsZXQgdHlwZSA9IHR5cGVvZiBpbnB1dDtcblxuICAgIHJldHVybiBpbnB1dCAhPSBudWxsICYmIHR5cGVzW3R5cGVdID8gdHlwZXNbdHlwZV0odGhpcywgaW5wdXQpICsgdGhpcy5oYXNoZXIodHlwZSkgOiAwO1xuICB9XG5cbiAgY29tcGFyZUhhc2hlcyhhLCBiKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzaChhKSA9PT0gdGhpcy5oYXNoKGIpO1xuICB9XG5cbiAgLy9mYXN0ZXIgdGhhbiBjb21wYXJlXG4gIGNvbXBhcmUoYSwgYikge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhKSA9PT0gSlNPTi5zdHJpbmdpZnkoYik7XG4gIH1cbn1cbiIsImltcG9ydCBMaWFpc29uIGZyb20gJy4vTGlhaXNvbic7XG5pbXBvcnQgQmluZGluZyBmcm9tICcuL0JpbmRpbmcnO1xuaW1wb3J0IFVzZXJNb2RlbCBmcm9tICcuL1VzZXJNb2RlbCc7XG5pbXBvcnQgVmlld01vZGVsIGZyb20gJy4vVmlld01vZGVsJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXhhbXBsZSB7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICB0aGlzLmJpbmQgPSBuZXcgTGlhaXNvbihkYXRhKTtcbiAgICBjb25zb2xlLmxvZyh0aGlzLmJpbmQpO1xuICAgIHRoaXMuYmluZGluZyA9IG5ldyBCaW5kaW5nKHRoaXMuYmluZCk7XG4gICAgdGhpcy5leGFtcGxlQmluZGluZygpO1xuICAgIHRoaXMuZXhhbXBsZVJvdXRlcigpO1xuICB9XG5cbiAgZXhhbXBsZUJpbmRpbmcoKSB7XG4gICAgLy8gaGVyZSB5b3UgaGF2ZSBhY2Nlc3MgdG8gdGhpcy5iaW5kLnVzZXIgYW5kIHRoaXMuYmluZC5wcm9ncmFtbWluZ19sYW5ndWFnZXNcbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmJpbmQudXNlcik7XG4gICAgLy8gY29uc29sZS5sb2codGhpcy5iaW5kLnByb2dyYW1taW5nX2xhbmd1YWdlcyk7XG5cbiAgICAvL21vZGVsIGV4YW1wbGVzXG4gICAgbGV0IHVzZXIgPSBuZXcgVXNlck1vZGVsKCk7XG4gICAgdXNlci5zZXQoJ2FnZScsICc4Nzc3Jyk7IC8vIHNob3VsZCBmYWlsXG4gICAgdXNlci5zZXQoJ25hbWUnLCAnbXkgZmlyc3QgbmFtZSBvbiB1c2VyIG1vZGVsJyk7IC8vc2hvdWxkIHBhc3NcbiAgICB1c2VyLnNldCgnYWdlJywge1xuICAgICAgYWdlOiAzM1xuICAgIH0pOyAvLyBzaG91bGQgZmFpbFxuICAgIHVzZXIuc2V0KCdhZ2UnLCA5OTkpOyAvL3Nob3VsZCBwYXNzXG4gICAgdXNlci5zZXQoJ2FkZHJlc3MnLCAnbXkgYWRkcmVzcycpOyAvL3Nob3VsZCBwYXNzXG5cbiAgICAvL3NldHMgZGF0YSBiaW5kaW5nXG4gICAgLy8gdGhpcy5iaW5kLnVzZXIubmFtZSA9IHVzZXIuZ2V0KCduYW1lJylcbiAgICB1c2VyLnNldCgnYWRkcmVzcycsIHVzZXIudXBDYXNlKCdteSBzZWNvbmQgYWRkcmVzcycpKTsgLy9zaG91bGQgcGFzcyBhbmQgcG9zdGZpeCBcIiFcIiB0byB0aGUgYWRkcmVzc1xuXG4gICAgdXNlci5zYXZlKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgIGNvbnNvbGUubG9nKCd0aGVuJyk7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdyZXF1ZXN0IGZhaWxlZCcsIGVycm9yKTtcbiAgICB9KTtcbiAgICB1c2VyLnVwZGF0ZSgpO1xuICAgIHVzZXIuZmV0Y2goKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgY29uc29sZS5sb2coJ3RoZW4nKTtcbiAgICB9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ3JlcXVlc3QgZmFpbGVkJywgZXJyb3IpO1xuICAgIH0pO1xuICAgIHVzZXIuZGVzdHJveSgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICBjb25zb2xlLmxvZygndGhlbicpO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygncmVxdWVzdCBmYWlsZWQnLCBlcnJvcik7XG4gICAgfSk7XG5cbiAgICAvLyBzZWNvbmQgbW9kZWxcbiAgICBsZXQgdmlld21vZGVsID0gbmV3IFZpZXdNb2RlbCgpO1xuICAgIHZpZXdtb2RlbC5zZXQoJ3NpbmdsZScsICd1cGRhdGVkIHZpYSB2aWV3bW9kZWwgbW9kZWwgc2V0IGZ1bmN0aW9uJyk7IC8vIHNob3VsZCBwYXNzXG4gICAgdmlld21vZGVsLnNldCgndXNlci5uYW1lJywgJ215IHNlY29uZCBleGFtcGxlIG5hbWUnKTsgLy9zaG91bGQgcGFzc1xuICAgIHZpZXdtb2RlbC5zZXQoJ3VzZXIuYWdlJywge1xuICAgICAgICBhZ2U6IDIyXG4gICAgICB9KTsgLy8gc2hvdWxkIGZhaWxcbiAgICB2aWV3bW9kZWwuc2V0KCd1c2VyLmFnZScsIDQ0NCk7IC8vc2hvdWxkIGZhaWxcbiAgICB2aWV3bW9kZWwuc2V0KCd1c2VyLmFkZHJlc3MnLCA3Nzg3OCk7IC8vc2hvdWxkIGZhaWxcbiAgICB2aWV3bW9kZWwuc2V0KCd1c2VyLmFkZHJlc3MnLCAnbXkgc2Vjb25kIGFkZHJlc3MnKTsgLy9zaG91bGQgcGFzc1xuXG4gICAgLy9zZXRzIGRhdGEgYmluZGluZ1xuICAgIC8vIHRoaXMuYmluZCA9IHZpZXdtb2RlbC5nZXQoKVxuICAgIC8vIHRoaXMuYmluZC51c2VyID0gdXNlci5nZXQoKVxuICAgIHRoaXMuYmluZGluZy5yZWZyZXNoKHRoaXMuYmluZCk7XG4gIH1cblxuICBleGFtcGxlUm91dGVyKCkge1xuICAgIC8vIGNoYW5nZSBzdGF0ZSB0byAvbGlzdFxuICAgIC8vIHJvdXRlci5nbygnaG9kb3IvMTInLCB7bXlkYXRhOjEyMzQ1NTYsIG15b2JqOntuYW1lOidzaGVybG9jayd9fSk7XG4gICAgLy8gc2V0VGltZW91dCgoKT0+IHdpbmRvdy5yb3V0ZXIuZ28oJ2xpc3QnKSwyMDAwKVxuICB9XG59XG4iLCJpbXBvcnQgTGlhaXNvbiBmcm9tICcuL0xpYWlzb24nO1xuaW1wb3J0IEJpbmRpbmcgZnJvbSAnLi9CaW5kaW5nJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXhhbXBsZTIge1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgdGhpcy5iaW5kID0gbmV3IExpYWlzb24oZGF0YSk7XG4gICAgbmV3IEJpbmRpbmcodGhpcy5iaW5kKTtcbiAgICAgIC8vIHRoaXMuYW5vdGhlckZ1bmN0aW9uKClcbiAgfVxuXG4gIGFub3RoZXJGdW5jdGlvbigpIHtcbiAgICAvLyBoZXJlIHlvdSBoYXZlIGFjY2VzcyB0byB0aGlzLmRhdGEudXNlciBhbmQgdGhpcy5kYXRhLnByb2dyYW1taW5nX2xhbmd1YWdlc1xuICAgIGNvbnNvbGUubG9nKHRoaXMuYmluZC5zdHJpbmcpO1xuICB9XG59XG4iLCIvLyBwdXRzIHJvdXRlcyBvbiB0aGUgcm91dGVyIGNsYXNzXG5cbmltcG9ydCBSb3V0ZXIgZnJvbSAnLi9Sb3V0ZXInO1xuLy8gVE9ETzogbm90IGF0dGFjaCB0aGlzIHRvIHRoZSBnbG9iYWwgbmFtZXNwYWNlXG53aW5kb3cucm91dGVyID0gd2luZG93LnJvdXRlciB8fCBuZXcgUm91dGVyKCk7XG5yb3V0ZXIuc3RhdGUoe1xuICBuYW1lOiAnL3VzZXJzJyxcbiAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvdXNlcmluZGV4Lmh0bWwnXG59KS5zdGF0ZSh7XG4gIG5hbWU6ICcvdXNlci86aWQnLFxuICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy91c2VyLmh0bWwnXG59KS5zdGF0ZSh7XG4gIG5hbWU6ICcvdXNlci86aWQvZGV0YWlscycsXG4gIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3VzZXJkZXRhaWxzLmh0bWwnXG59KS5zdGF0ZSh7XG4gIG5hbWU6ICcvdXNlci86aWQvOnN1YmlkJyxcbiAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvdXNlcnN1Yi5odG1sJ1xufSkuc3RhdGUoe1xuICBuYW1lOiAnL2xpc3QnLFxuICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9saXN0Lmh0bWwnXG59KS5zdGF0ZSh7XG4gIG5hbWU6ICcvJyxcbiAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvbGlzdC5odG1sJ1xufSkuZmFsbGJhY2soe1xuICBuYW1lOiAnLzQwNCcsXG4gIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzLzQwNC5odG1sJ1xufSk7XG4iLCJpbXBvcnQgQmFzZU1vZGVsIGZyb20gJy4vQmFzZU1vZGVsJ1xuXG5leHBvcnQgY2xhc3MgVXNlck1vZGVsIGV4dGVuZHMgQmFzZU1vZGVsIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3VzZXInLCB7XG4gICAgICBpZDoge1xuICAgICAgICB2YWx1ZTogNzg5Nzg3LFxuICAgICAgICB0eXBlOiAnbnVtYmVyJ1xuICAgICAgfSxcbiAgICAgIG5hbWU6IHtcbiAgICAgICAgdmFsdWU6ICduYW1lJyxcbiAgICAgICAgdHlwZTogJ3N0cmluZydcbiAgICAgIH0sXG4gICAgICBhZGRyZXNzOiB7XG4gICAgICAgIHZhbHVlOiAnMjIxYiBiYWtlJyxcbiAgICAgICAgdHlwZTogJ3N0cmluZydcbiAgICAgIH0sXG4gICAgICBhZ2U6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHR5cGU6ICdudW1iZXInXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvL2V4YW1wbGUgbW9kZWwgaGVscGVyXG4gIHVwQ2FzZShzdHIpIHtcbiAgICByZXR1cm4gc3RyLnRvVXBwZXJDYXNlKCk7XG4gIH1cbn1cbiIsImltcG9ydCBCYXNlTW9kZWwgZnJvbSAnLi9CYXNlTW9kZWwnXG5cbmV4cG9ydCBjbGFzcyBWaWV3TW9kZWwgZXh0ZW5kcyBCYXNlTW9kZWwge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigndmlldycsIHtcbiAgICAgIHNpbmdsZToge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgdmFsdWU6ICdmcm9tIHNjaGVtYSdcbiAgICAgIH0sXG4gICAgICB1c2VyOiB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICB2YWx1ZToge1xuICAgICAgICAgIGlkOiB7XG4gICAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICAgIHZhbHVlOiA4ODg4OFxuICAgICAgICAgIH0sXG4gICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICB2YWx1ZTogJ1NoZXJsb2NrIEhvbG1lcydcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFkZHJlc3M6IHtcbiAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgdmFsdWU6ICcyMjFiIEJha2VyIFN0cmVldCdcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgcHJvZ3JhbW1pbmdfbGFuZ3VhZ2VzOiB7XG4gICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgIHZhbHVlOiBbJ2phdmFzY3JpcHQnLCAncnVieSddXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
