"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function load_component(t,e){new window[t](e)}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),BaseModel=function(){function t(e,n){_classCallCheck(this,t),this.modelName=e,this.data=n}return _createClass(t,[{key:"set",value:function(t,e){var n=this.existsInSchema(this.data,t,e);if(n){var a=this.checkType(this.data,t,e);a?this.setValue(this.data,t,e):console.warn('Not setting "'+t+'" in '+this.modelName+' model to "'+e+'" because it it isnt the right type')}else console.warn('Not setting "'+t+'" in '+this.modelName+' model to "'+e+'" because it doesnt exist in the schema')}},{key:"get",value:function(t){return t?this.getValue(this.data,t):this.getData(this.data)}},{key:"existsInSchema",value:function(t,e,n){return"string"==typeof e&&(e=e.split(".")),e.length>1&&t[e[0]]?this.existsInSchema(t[e.shift()].value,e,n):t[e[0]]?!0:!1}},{key:"checkType",value:function(t,e,n){return"string"==typeof e&&(e=e.split(".")),e.length>1&&t[e[0]]?this.checkType(t[e.shift()].value,e,n):t[e[0]].type===typeof n}},{key:"getData",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];for(var n in t)"object"===t[n].type?(e[n]={},this.getData(t[n].value,e[n])):e[n]=t[n].value;return e}},{key:"setValue",value:function(t,e,n){"string"==typeof e&&(e=e.split(".")),e.length>1&&t[e[0]].value?this.setValue(t[e.shift()].value,e,n):t[e[0]].value&&(t[e[0]].value=n)}},{key:"getValue",value:function(t,e){return"string"==typeof e&&(e=e.split(".")),e.length>1&&t[e[0]]?this.getValue(t[e.shift()].value,e):t[e[0]].value||""}},{key:"save",value:function(){var t=arguments.length<=0||void 0===arguments[0]?this.get("id"):arguments[0],e={};e[this.modelName]=this.get(),console.log("make post xhr call to api/v1/"+this.modelName+"/"+t,e)}},{key:"fetch",value:function(){var t=arguments.length<=0||void 0===arguments[0]?this.get("id"):arguments[0];console.log("make get xhr call to api/v1/"+this.modelName+"/"+t)}},{key:"update",value:function(){var t=arguments.length<=0||void 0===arguments[0]?this.get("id"):arguments[0],e={};e[this.modelName]=this.get(),console.log("make update xhr call to api/v1/"+this.modelName+"/"+t,e)}},{key:"destroy",value:function(){var t=arguments.length<=0||void 0===arguments[0]?this.get("id"):arguments[0];console.log("make delete xhr call to api/v1/"+this.modelName+"/"+t)}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();NodeList.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator];var Binding=function(){function t(e){var n=this;_classCallCheck(this,t),this.data=e,this.findBindable();var a=a||{};setInterval(function(){JSON.stringify(a)!==JSON.stringify(n.data)&&(a=JSON.parse(JSON.stringify(n.data)),n.populateBindings())},10)}return _createClass(t,[{key:"populateBindings",value:function(){var t=!0,e=!1,n=void 0;try{for(var a,i=document.querySelectorAll("[liaison-bind]")[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var l=a.value,s=document.activeElement.getAttribute("liaison-bind");l===document.activeElement||l.getAttribute("liaison-bind")!==s&&null!==s||this.setElementContent(l,this.getValue(this.data,l.getAttribute("liaison-bind")))}}catch(o){e=!0,n=o}finally{try{!t&&i["return"]&&i["return"]()}finally{if(e)throw n}}}},{key:"findBindable",value:function(){var t=this,e=!0,n=!1,a=void 0;try{for(var i,l=function(){var e=i.value;e.addEventListener("keyup",function(n){t.setValue(t.data,e.getAttribute("liaison-bind"),n.target.value)})},s=document.querySelectorAll("[liaison-bind]")[Symbol.iterator]();!(e=(i=s.next()).done);e=!0)l()}catch(o){n=!0,a=o}finally{try{!e&&s["return"]&&s["return"]()}finally{if(n)throw a}}}},{key:"setElementContent",value:function(t,e){e&&(t.innerHTML=e,t.value=e)}},{key:"setValue",value:function(t,e,n){"string"==typeof e&&(e=e.split(".")),e.length>1&&t[e[0]]?this.setValue(t[e.shift()],e,n):t[e[0]]&&(t[e[0]]=n)}},{key:"getValue",value:function(t,e){return"string"==typeof e&&(e=e.split(".")),e.length>1&&t[e[0]]?this.getValue(t[e.shift()],e):t[e[0]]||""}},{key:"refresh",value:function(t){this.data=t,this.populateBindings()}}]),t}(),Liaison=function t(e){_classCallCheck(this,t);var n;for(n in e)this[n]=e[n]};